# STRICT_MODE: قواعد الالتزام الحرفية لتوليد الموديلات وملفات الدومين (النسخة المتكاملة)

> **تنبيه:** يمنع الخروج عن هذه القواعد نهائيًا. يجب الالتزام بها بدقة تامة في كل خطوة.

---

## الخطوات الأساسية لاستخراج الحقول والعلاقات

1. **يجب أولًا الاطلاع على ملف الترقيم وتخطيط الأسماء:**
   - المسار: `/home/ameen/projects/OnyxQ/src/table_models_mapping.txt`
   - هذا الملف يحدد:
     - رقم الجدول
     - اسم الجدول القديم
     - اسم الموديل الجديد المطلوب إنشاؤه
   - يجب استخدام هذا الملف لاستخلاص التسمية الجديدة والقديمة لكل موديل، واعتماد الترقيم الصحيح لكل جدول/موديل.

2. **تحليل ملف البنية مباشرة (بدون سكربت):**
   - استخرج الحقول والمفاتيح والعلاقات مباشرة من الملف:
     - `/home/ameen/projects/OnyxQ/src/output_tmp.json`
   - استخدم أسماء الجداول القديمة كما وردت في ملف الترقيم للبحث عن تفاصيلها في ملف البنية.
   - استخرج جميع الحقول، المفاتيح، والعلاقات المرتبطة لكل جدول.
   - لا تعتمد على أي سكربت وسيط؛ التحليل يجب أن يكون مباشرًا من الملف.

3. **إذا لم تتمكن من استخراج أي معلومة من المصدرين أعلاه (الترقيم + البنية)، توقف فورًا عن التنفيذ ولا تتابع أي خطوة.**

---

## الشروط العامة

1. **اتبع معمارية Clean Architecture** بجميع تفاصيلها.  
   - استخدم طبقة common المناسبة في الدومين لكل كيانات المشروع.
3. **أضف توثيقًا مفصلًا وشرحًا واضحًا** أعلى كل موديل، وكل خاصية، وكل حدث، وكل Enum، مع توضيح التسمية القديمة (واسم الجدول والرقم).
4. **يمنع منعًا باتًا تقليل أو حذف أو اختصار أي حقل** (إلا إذا أدرجته ضمن ValueObject مع ذكر ذلك في التوثيق).
5. **اتبع الترقيم للموديلات** كما في ملف تخطيط الجداول، واذكره بوضوح في التوثيق أعلى كل موديل.
6. **أي حقل أو مفتاح أو علاقة في ملف البنية يجب أن يوجد في الموديل**، لا يجوز إغفال أي خاصية (إلا إذا أدرجت داخل ValueObject مع التوثيق).
   - يجوز إضافة خصائص جديدة فقط إذا كانت ضرورية لمزايا إضافية واضحة وتوثق ذلك.
7. **العلاقات يجب أن تُدرج كاملة وبدون نقص**، مع مراعاة الأنواع (one-to-many, many-to-one, ...).
   - إذا أضفت علاقة جديدة أو علاقة لم يتم إنشاء الطرف الآخر بعد، أنشئها كملاحظة واضحة وستُكمل لاحقًا.
9. **المفاتيح الرئيسية** للموديلات كما في الجداول الأصلية بلا تغيير.
10. **حافظ على نمط التسمية الحديث للحقول** مع ذكر الاسم القديم بجانب كل خاصية في تعليق يبدأ بـ `!#` داخل `/**/` ويشمل شرحًا موجزًا بالعربية.
11. **أضف ملفات Enum المطلوبة بشكل تفصيلي ودقيق، مع شرح لكل قيمة**.
12. **لا تتوقف حتى تكمل المهمة بالكامل** التي طُلبت منك.
14. **عند وجود أي خروج عن الخطة أو القواعد**، أبلغ المستخدم كمقترح قبل التنفيذ وانتظر الموافقة أو الرفض منه.
15. **التعامل مع علاقات الـNavigation Properties يجب أن يكون كاملًا (جمع/مفرد) مع توثيق العلاقة واسم الجدول/الموديل القديم** في تعليق يبدأ بـ `@#` داخل `/**/`.
16. **أنشئ Constructors خاصة وعامة للموديل مع تهيئة الخصائص والـCollections المناسبة.**

---

## قواعد التنفيذ والتوقف

- **المصدران الوحيدان لاستخراج الحقول والعلاقات هما:**  
  1. ملف تخطيط الجداول القديم إلى الموديلات الجديدة (`table_models_mapping.txt`)
  2. ملف البنية (`output_tmp.json`)
- إذا لم تتمكن من استخراج أي معلومة من المصدرين أعلاه، **توقف فورًا ولا تتابع التنفيذ** حتى يتم حل المشكلة أو تحديث المصادر.
- لا تبرر أو تشرح أي خطوة أثناء التنفيذ؛ فقط نفذ المهمة كما هي مطلوبة.
- **لا تطرح أسئلة توضيحية إلا في حالة وجود مشكلة حقيقية في القواعد أو المصادر.**

---

## ملخص التنفيذ التلقائي

- لا تطرح أسئلة توضيحية.
- إذا نقصت معلومة، افترض أفضل فرضية معقولة وأكمل التنفيذ مع توثيق الافتراض في التعليق.
- لا تبرر اختياراتك ولا تبين منطقك أثناء العمل؛ فقط نتائج نهائية واضحة وموثقة.
- عند وجود أي لبس أو ضرورة لتغيير القواعد أو الخطة، أبلغ المستخدم بذلك كمقترح قبل التنفيذ.

---

**يجب الالتزام التام بهذه القواعد في كل خطوة دون أي استثناء، والحرص على إخراج موديلات وملفات دومين متكاملة واحترافية كما في الأمثلة التفصيلية.**