# شاشة تقارير المستخدمين (User Reports)

## نظرة عامة
شاشة تقارير المستخدمين هي واحدة من الشاشات الأساسية في نظام الأونكس برو ERP، وتُستخدم لإنشاء وعرض وإدارة تقارير متنوعة حول أنشطة المستخدمين في النظام. توفر هذه الشاشة مجموعة شاملة من التقارير التحليلية والإحصائية التي تساعد مديري النظام والمدراء التنفيذيين على متابعة أداء المستخدمين، ومراقبة الأنشطة، وتحليل أنماط الاستخدام، وتحديد احتياجات التدريب، وتقييم مستويات الإنتاجية والكفاءة.

تتميز الشاشة بقدرات متقدمة لتخصيص التقارير وتصفيتها حسب معايير متعددة، كما توفر إمكانيات عرض بصري للبيانات من خلال الرسوم البيانية والمخططات التفاعلية. تساعد هذه الشاشة في تحقيق الشفافية وتحسين إدارة المستخدمين وضمان الامتثال لسياسات وإجراءات المؤسسة.

## مكونات واجهة المستخدم

### القسم العلوي (شريط التحكم)
- **شريط العنوان**: يعرض عنوان الشاشة "تقارير المستخدمين" مع أيقونة توضيحية
- **شريط الأدوات الرئيسي**: يحتوي على أزرار للوظائف الأساسية مثل:
  - زر إنشاء تقرير جديد (أيقونة +)
  - زر حفظ التقرير (أيقونة حفظ)
  - زر تصدير التقرير (أيقونة تصدير)
  - زر طباعة التقرير (أيقونة طباعة)
  - زر تحديث البيانات (أيقونة تحديث)
  - زر المساعدة (أيقونة علامة استفهام)
- **شريط المعلومات**: يعرض معلومات عن المستخدم الحالي والتاريخ والوقت
- **مؤشر الحالة**: يعرض حالة التقرير الحالي (مؤقت، محفوظ، قيد المعالجة)

### قسم اختيار التقارير
- **قائمة التقارير الرئيسية**:
  - تقرير نشاط المستخدمين
  - تقرير أوقات الدخول والخروج
  - تقرير استخدام الشاشات
  - تقرير العمليات والإجراءات
  - تقرير الصلاحيات والأدوار
  - تقرير أخطاء المستخدمين
  - تقرير كفاءة المستخدمين
  - تقرير المقارنة بين المستخدمين
  - تقرير المجموعات والأقسام
  - تقرير الاستخدام حسب الوحدات والتطبيقات
- **حقل البحث عن التقارير**: للبحث السريع في قائمة التقارير المتاحة
- **قسم التقارير المفضلة**: يعرض التقارير التي تمت إضافتها للمفضلة
- **قسم التقارير الأخيرة**: يعرض التقارير التي تم استخدامها مؤخراً
- **قسم التقارير المخصصة**: يعرض التقارير المخصصة التي أنشأها المستخدم

### قسم معايير التقرير
- **معايير أساسية**:
  - نطاق التاريخ (من تاريخ - إلى تاريخ)
  - اختيار المستخدمين (مستخدم محدد، مجموعة، الكل)
  - اختيار الفروع (فرع محدد، مجموعة فروع، كل الفروع)
  - اختيار الأدوار (دور محدد، مجموعة أدوار، كل الأدوار)
  - حالة المستخدمين (نشط، موقوف، كل الحالات)
- **معايير متقدمة**:
  - نوع النشاط (دخول، تعديل، حذف، استعلام، طباعة)
  - مستوى الأهمية (عادي، مهم، حرج)
  - مسار الوصول (مباشر، API، تطبيق جوال)
  - نوع المحتوى (بيانات، عمليات، إعدادات، نظام)
  - نتيجة العملية (ناجحة، فاشلة، محاولة)
- **خيارات التجميع والفرز**:
  - معيار التجميع (حسب المستخدم، الوقت، النوع، الشاشة)
  - اتجاه الفرز (تصاعدي، تنازلي)
  - ترتيب التقرير (حسب التاريخ، عدد العمليات، المدة)
  - عدد النتائج المعروضة (10، 25، 50، 100، الكل)
- **معايير التصفية المتقدمة**:
  - إمكانية إضافة شروط متعددة باستخدام معاملات منطقية (و، أو، ليس)
  - أدوات المقارنة (أكبر من، أصغر من، يساوي، يحتوي على)
  - حقول تصفية متخصصة حسب نوع التقرير
- **حفظ وإدارة المعايير**:
  - زر حفظ المعايير كقالب
  - قائمة قوالب المعايير المحفوظة
  - زر استيراد معايير
  - زر إعادة تعيين المعايير الافتراضية

### قسم عرض التقرير
- **طرق العرض المختلفة**:
  - عرض جدولي
  - عرض رسوم بيانية
  - عرض مختلط (جداول ورسوم بيانية)
  - عرض تفصيلي/ملخص
- **أدوات التحكم بالعرض**:
  - تخصيص الأعمدة المعروضة في الجدول
  - خيارات تنسيق وتلوين الخلايا
  - خيارات تكبير/تصغير المحتوى
  - خيارات التجميع والطي والتوسيع
- **أنواع الرسوم البيانية**:
  - رسم بياني شريطي
  - رسم بياني دائري
  - رسم بياني خطي
  - رسم بياني منطقة
  - مخطط حراري
  - مخطط فقاعي
- **أدوات التحليل المباشر**:
  - تسليط الضوء على القيم الاستثنائية
  - مقارنة القيم مع المتوسط
  - تحديد الاتجاهات والأنماط
  - أدوات تحليل السلاسل الزمنية
- **منطقة التفاصيل**:
  - عرض تفاصيل العنصر المحدد
  - معلومات المستخدم
  - تاريخ ووقت العملية
  - تفاصيل الإجراء المنفذ
  - نتيجة العملية

### قسم أدوات التصدير والمشاركة
- **خيارات التصدير**:
  - تصدير إلى PDF
  - تصدير إلى Excel
  - تصدير إلى CSV
  - تصدير إلى تنسيق HTML
  - تصدير كصورة (PNG/JPG)
- **خيارات الطباعة**:
  - طباعة التقرير كاملاً
  - طباعة الصفحة الحالية
  - طباعة العناصر المحددة
  - إعدادات الطباعة المتقدمة
- **خيارات المشاركة**:
  - مشاركة عبر البريد الإلكتروني
  - جدولة إرسال التقرير
  - مشاركة رابط للتقرير
  - نشر التقرير للمستخدمين المعنيين

## الوظائف الرئيسية

### إنشاء وتخصيص التقارير
1. **إنشاء تقرير جديد**:
   - اختيار نوع التقرير من القائمة الرئيسية
   - تحديد معايير التقرير الأساسية (النطاق الزمني، المستخدمين، الفروع)
   - تحديد معايير التقرير المتقدمة حسب نوع التقرير
   - تحديد خيارات التجميع والفرز
   - تطبيق معايير التصفية المتقدمة
   - معاينة نتائج التقرير
   - حفظ التقرير للاستخدام المستقبلي

2. **تخصيص التقارير الموجودة**:
   - فتح تقرير موجود من قائمة التقارير
   - تعديل معايير التقرير حسب الاحتياجات الجديدة
   - إضافة أو إزالة حقول العرض
   - تخصيص الرسوم البيانية والمخططات
   - تغيير أنماط العرض والتنسيق
   - حفظ التغييرات كتقرير جديد أو تحديث التقرير الحالي
   - إضافة التقرير المخصص للمفضلة

3. **إنشاء قوالب التقارير**:
   - تصميم تقرير نموذجي مع مجموعة من المعايير والخصائص
   - حفظ التقرير كقالب للاستخدام المستقبلي
   - تطبيق القالب على تقارير جديدة
   - مشاركة القالب مع مستخدمين آخرين
   - إدارة قوالب التقارير المحفوظة
   - تحديث وتعديل القوالب الموجودة

### توليد وعرض التقارير
1. **تشغيل التقارير الفورية**:
   - تحديد معايير التقرير
   - تنفيذ التقرير للحصول على النتائج الفورية
   - عرض البيانات في الشكل المناسب (جدول، رسم بياني)
   - تنقيح المعايير بناءً على النتائج الأولية
   - تحديث البيانات لضمان الحصول على أحدث المعلومات
   - التفاعل مع نتائج التقرير (التصفية، الفرز، التجميع)

2. **إدارة عرض التقارير**:
   - التبديل بين طرق العرض المختلفة (جدولي، رسوم بيانية، مختلط)
   - تخصيص الأعمدة المعروضة في الجداول
   - تعديل أنواع وخصائص الرسوم البيانية
   - تطبيق التنسيق الشرطي على البيانات
   - توسيع وطي المجموعات والأقسام
   - ضبط مستوى التفاصيل المعروضة
   - حفظ تفضيلات العرض للاستخدام المستقبلي

3. **استكشاف البيانات والتحليل**:
   - التنقل بين مستويات التفاصيل المختلفة (التكبير والتصغير)
   - تحليل الاتجاهات والأنماط في البيانات
   - تحديد القيم الاستثنائية والشاذة
   - إجراء تحليلات مقارنة بين الفترات أو المستخدمين
   - تطبيق تحليلات إحصائية متقدمة
   - الوصول إلى تفاصيل معاملات محددة
   - تتبع مسار البيانات من الملخص إلى المصدر

### تنظيم وإدارة التقارير
1. **تنظيم وفهرسة التقارير**:
   - تصنيف التقارير حسب النوع والاستخدام
   - إضافة تقارير للمفضلة للوصول السريع
   - ترتيب التقارير المخصصة حسب الأولوية
   - وضع علامات وتصنيفات على التقارير
   - البحث والتصفية في قائمة التقارير
   - تجميع التقارير ذات الصلة في مجموعات
   - إدارة إصدارات التقارير المختلفة

2. **جدولة وأتمتة التقارير**:
   - جدولة توليد تقارير دورية (يومية، أسبوعية، شهرية)
   - إعداد قواعد توزيع التقارير تلقائياً
   - تحديد مستلمي التقارير المجدولة
   - تعيين شروط وتنبيهات لتوليد التقارير
   - ضبط خيارات التنسيق والتسليم للتقارير المجدولة
   - مراقبة حالة التقارير المجدولة
   - تعديل وإلغاء جداول التقارير

3. **إدارة مجموعات التقارير**:
   - إنشاء لوحات تحكم تضم مجموعة من التقارير
   - إضافة وإزالة تقارير من لوحات التحكم
   - تنظيم تخطيط وترتيب التقارير في لوحة التحكم
   - تطبيق مرشحات مشتركة على مجموعة تقارير
   - تحديث لوحة التحكم بشكل دوري
   - مشاركة لوحات التحكم مع المستخدمين الآخرين
   - تخصيص وحفظ إعدادات لوحة التحكم

### تصدير ومشاركة التقارير
1. **تصدير التقارير بتنسيقات مختلفة**:
   - تصدير البيانات بتنسيق PDF للمشاركة الرسمية
   - تصدير البيانات بتنسيق Excel للتحليل الإضافي
   - تصدير البيانات بتنسيق CSV للتكامل مع أنظمة أخرى
   - تصدير الرسوم البيانية كصور PNG/JPG
   - تصدير التقرير كامل بتنسيق HTML للعرض على الويب
   - ضبط خيارات التصدير (تضمين الصور، ترويسة وتذييل)
   - تخصيص تنسيق الملفات المصدرة

2. **طباعة التقارير**:
   - معاينة التقرير قبل الطباعة
   - تحديد خيارات الطباعة (الصفحات، التوجيه، الهوامش)
   - طباعة التقرير كاملاً أو أجزاء محددة
   - إنشاء نسخة PDF مخصصة للطباعة
   - حفظ إعدادات الطباعة المفضلة
   - طباعة بخيارات متقدمة للتحكم في الجودة والألوان
   - طباعة الرسوم البيانية بشكل منفصل أو مع البيانات

3. **مشاركة التقارير**:
   - إرسال التقارير عبر البريد الإلكتروني
   - جدولة إرسال التقارير بشكل دوري
   - إنشاء روابط مشاركة للتقارير
   - تحديد صلاحيات الوصول للتقارير المشتركة
   - إرسال إشعارات للمستخدمين المعنيين
   - تتبع حالة مشاهدة وتنزيل التقارير المشتركة
   - توفير واجهة للتعليق والتعاون حول التقارير

### أنواع التقارير المتخصصة
1. **تقارير نشاط المستخدمين**:
   - تفاصيل تسجيل الدخول والخروج للمستخدمين
   - عدد ساعات الاستخدام لكل مستخدم
   - أنماط استخدام النظام خلال اليوم والأسبوع
   - تحليل فترات الذروة في النشاط
   - سجل العمليات المنفذة لكل مستخدم
   - مقارنة مستويات النشاط بين الفترات الزمنية
   - تحليل أوقات الخمول وعدم النشاط

2. **تقارير استخدام الشاشات والوحدات**:
   - إحصائيات استخدام الشاشات المختلفة
   - متوسط وقت البقاء على كل شاشة
   - أكثر الشاشات استخداماً حسب المستخدم
   - نسب استخدام وحدات النظام المختلفة
   - تسلسل التنقل بين الشاشات
   - تحليل أنماط الاستخدام حسب الوقت
   - تحديد الشاشات الأقل استخداماً

3. **تقارير الأخطاء والمشاكل**:
   - سجل الأخطاء التي واجهها المستخدمون
   - تصنيف الأخطاء حسب النوع والشدة
   - تحليل تكرار الأخطاء ومعدل حدوثها
   - تحديد الشاشات الأكثر عرضة للأخطاء
   - تتبع وقت الاستجابة لحل المشاكل
   - تحليل أثر الأخطاء على إنتاجية المستخدمين
   - مؤشرات تحسن أو تدهور معدلات الأخطاء

4. **تقارير الأداء والإنتاجية**:
   - قياس معدل إنجاز المهام للمستخدمين
   - تحليل أوقات معالجة العمليات المختلفة
   - مقارنة الإنتاجية بين المستخدمين والمجموعات
   - تتبع معدلات النمو في الكفاءة
   - تحديد أوقات الذروة والانخفاض في الإنتاجية
   - قياس تأثير التدريب على أداء المستخدمين
   - تحليل العلاقة بين الأخطاء والإنتاجية

5. **تقارير الصلاحيات والأمان**:
   - عرض صلاحيات المستخدمين على الشاشات والوظائف
   - تحليل استخدام الصلاحيات الممنوحة
   - اكتشاف محاولات الوصول غير المصرح بها
   - مراقبة التغييرات في مستويات الصلاحيات
   - تحديد الصلاحيات غير المستخدمة
   - مراجعة توافق الصلاحيات مع سياسات الأمان
   - تقارير الامتثال ومراجعة الحسابات

## العمليات المتقدمة

### تحليل البيانات المتقدم
- **التحليل الإحصائي للأنشطة**: استخدام أدوات إحصائية متقدمة لتحليل أنماط استخدام النظام
- **تحليل الاتجاهات**: اكتشاف وتحليل اتجاهات الاستخدام على المدى الطويل
- **التنبؤ بالاستخدام المستقبلي**: استخدام نماذج التنبؤ لتوقع أنماط الاستخدام المستقبلية
- **تحليل التباين**: مقارنة وتحليل الاختلافات في أنماط الاستخدام بين المستخدمين والفترات
- **تحليل السلاسل الزمنية**: دراسة تطور نشاط المستخدمين عبر الزمن
- **اكتشاف الشذوذ**: تحديد الأنماط غير العادية وإبراز الحالات الاستثنائية
- **تحليل السببية**: البحث عن العلاقات السببية بين أنماط الاستخدام والمتغيرات الأخرى

### تقارير الأداء المقارن
- **مقارنة الأداء بين المستخدمين**: تحليل وعرض مقارنات أداء المستخدمين ضمن معايير محددة
- **مقارنة الأداء عبر الفترات الزمنية**: تتبع تطور أداء المستخدم أو مجموعة المستخدمين
- **مقارنة الأداء مع المعايير المرجعية**: مقارنة الأداء الفعلي مع المعايير المستهدفة
- **تحليل فجوات الأداء**: تحديد وتحليل الفجوات بين الأداء المتوقع والفعلي
- **قياس تأثير التدريب**: تحليل تأثير الدورات التدريبية على أداء المستخدمين
- **تقييم أداء الفريق**: تقييم أداء مجموعات وفرق العمل كوحدة واحدة
- **تحليل العوامل المؤثرة في الأداء**: تحديد العوامل الرئيسية التي تؤثر على مستويات الأداء

### تحليل أنماط استخدام النظام
- **خرائط تدفق الاستخدام**: إنشاء خرائط توضح المسارات الشائعة للمستخدمين خلال النظام
- **تحليل تسلسل العمليات**: دراسة تسلسل العمليات التي ينفذها المستخدمون
- **تحليل وقت الاستخدام**: تحليل أنماط استخدام النظام حسب الوقت (ساعة، يوم، شهر)
- **تحليل تكرار الاستخدام**: قياس معدلات تكرار استخدام وظائف وشاشات معينة
- **تحليل مدة الاستخدام**: قياس متوسط وقت استخدام الشاشات والوظائف المختلفة
- **تحديد نقاط الاختناق**: اكتشاف نقاط الاختناق في تدفق العمل
- **تحليل معدلات الإتمام**: قياس نسب إتمام العمليات المختلفة من قبل المستخدمين

### تقارير اكتشاف النمط والشذوذ
- **اكتشاف الاستخدام غير العادي**: تحديد أنماط الاستخدام الخارجة عن المألوف
- **الكشف عن الوصول المشبوه**: تنبيهات حول محاولات الوصول غير المعتادة
- **تحليل شذوذ الأوقات**: اكتشاف الأنشطة التي تتم في أوقات غير معتادة
- **تحليل الاستخدام المفرط**: تحديد حالات الاستخدام المفرط للموارد أو الوظائف
- **تحليل سلوك المستخدم**: اكتشاف التغييرات المفاجئة في سلوك المستخدم
- **التنبيه عن الأنماط المريبة**: إعداد نظام تنبيهات آلي للأنماط المشبوهة
- **التحليل الاستباقي للمخاطر**: تحديد المخاطر المحتملة بناءً على أنماط الاستخدام

### تخصيص لوحات المعلومات التنفيذية
- **إنشاء لوحات معلومات مخصصة**: تصميم لوحات معلومات مخصصة للمستويات الإدارية المختلفة
- **عرض المؤشرات الرئيسية للأداء**: تجميع وعرض مؤشرات الأداء الرئيسية في واجهة موحدة
- **تحديثات البيانات الحية**: عرض البيانات وتحديثها في الوقت الفعلي
- **الرسوم البيانية التفاعلية**: إضافة رسوم بيانية تفاعلية مع إمكانية التكبير والتصغير
- **مخصصات التنبيهات**: إعداد تنبيهات مخصصة لحالات معينة
- **تنظيم المجموعات والأقسام**: ترتيب وتنظيم المعلومات في مجموعات منطقية
- **حفظ وتطبيق التخطيطات المفضلة**: حفظ تخطيطات لوحة المعلومات المخصصة

### تكامل مصادر البيانات المتعددة
- **دمج بيانات المستخدمين من مصادر متعددة**: توحيد بيانات المستخدمين من مختلف أجزاء النظام
- **تكامل بيانات الأنظمة الخارجية**: دمج بيانات من أنظمة خارجية مرتبطة بنشاط المستخدمين
- **مزامنة البيانات متعددة المصادر**: ضمان تزامن البيانات من المصادر المختلفة
- **معالجة اختلافات البيانات**: التعامل مع اختلافات تنسيق وهيكل البيانات من المصادر المختلفة
- **إنشاء طبقة بيانات موحدة**: توفير رؤية موحدة للبيانات بغض النظر عن مصدرها
- **تتبع مصادر البيانات**: تتبع وتوثيق مصدر كل بيانات في التقارير
- **التحقق من جودة البيانات المدمجة**: ضمان دقة واكتمال البيانات بعد التكامل

### أتمتة التقارير والتنبيهات
- **جدولة التقارير التلقائية**: إعداد جداول زمنية لإنشاء وتوزيع التقارير آلياً
- **إعداد قواعد التنبيه**: تحديد شروط وقواعد لإطلاق التنبيهات
- **تنبيهات النشاط غير العادي**: إعداد إشعارات تلقائية للأنشطة المشبوهة
- **تقارير الاستثناءات الآلية**: إنشاء تقارير تركز على الحالات الاستثنائية
- **التوزيع الذكي للتقارير**: توزيع التقارير آلياً على المستخدمين المعنيين
- **متابعة تنفيذ الإجراءات**: تتبع الإجراءات المتخذة استجابة للتنبيهات
- **التكيف التلقائي للتقارير**: تعديل محتوى وتوقيت التقارير بناءً على أنماط الاستخدام

### تحليل تأثير التغييرات في النظام
- **قياس تأثير التحديثات**: تحليل تأثير التحديثات والتغييرات على استخدام النظام
- **تقييم اعتماد الميزات الجديدة**: قياس معدلات وسرعة اعتماد المستخدمين للميزات الجديدة
- **تحليل منحنى التعلم**: دراسة منحنى تعلم المستخدمين للوظائف والميزات الجديدة
- **تحديد مقاومة التغيير**: اكتشاف أنماط مقاومة المستخدمين للتغييرات
- **قياس العائد على الاستثمار**: تقييم العائد على الاستثمار للتحديثات والتطويرات
- **تحليل تأثير التدريب**: قياس تأثير برامج التدريب على استخدام النظام
- **دراسة التأثير على الإنتاجية**: تحليل تأثير التغييرات على إنتاجية المستخدمين 

## مكونات طبقة التطبيق

### الكيانات (Entities)

#### UserReportDefinition (تعريف تقرير المستخدمين)
كيان رئيسي يمثل تعريف تقرير المستخدمين:
- معرف التقرير (ID)
- رمز التقرير (ReportCode)
- اسم التقرير (ReportName)
- وصف التقرير (Description)
- نوع التقرير (ReportType)
- قالب التقرير (TemplateID)
- تصنيف التقرير (Category)
- حالة التقرير (Status) - نشط، غير نشط، مسودة
- إعدادات الوصول (AccessSettings)
- إعدادات العرض الافتراضية (DefaultDisplaySettings)
- المستخدم المنشئ (CreatedBy)
- تاريخ الإنشاء (CreatedDate)
- المستخدم المعدل (ModifiedBy)
- تاريخ التعديل (ModifiedDate)
- علامات التصنيف (Tags)
- الإصدار (Version)
- تفضيلات الطباعة (PrintSettings)
- إعدادات التخصيص (CustomizationSettings)

#### UserReportCriteria (معايير تقرير المستخدمين)
كيان يمثل معايير البحث والتصفية للتقرير:
- معرف المعيار (ID)
- معرف التقرير (ReportID)
- اسم المعيار (CriteriaName)
- نوع المعيار (CriteriaType)
- حقل المعيار (FieldName)
- عامل المقارنة (Operator) - يساوي، أكبر من، أصغر من، يحتوي
- قيمة المعيار (Value)
- ترتيب المعيار (Sequence)
- مجموعة المعايير (GroupID)
- الرابط المنطقي (LogicalOperator) - و، أو
- نوع القيمة (ValueType)
- حالة المعيار (Status)
- التصنيف (Category)
- المعيار الأصل (ParentCriteriaID)
- إعدادات التخصيص (CustomSettings)

#### UserReportLayout (تخطيط تقرير المستخدمين)
كيان يمثل تخطيط وهيكل عرض التقرير:
- معرف التخطيط (ID)
- معرف التقرير (ReportID)
- اسم التخطيط (LayoutName)
- وصف التخطيط (Description)
- نوع التخطيط (LayoutType) - جدولي، رسم بياني، مختلط
- إعدادات العرض (DisplaySettings)
- قائمة الحقول المعروضة (FieldsList)
- إعدادات الرسوم البيانية (ChartSettings)
- إعدادات التجميع (GroupSettings)
- إعدادات التنسيق الشرطي (ConditionalFormattingSettings)
- ترتيب الفرز (SortOrder)
- حالة التخطيط (Status)
- المستخدم المنشئ (CreatedBy)
- تاريخ الإنشاء (CreatedDate)
- الإصدار (Version)
- القالب المستخدم (TemplateID)

#### UserReportSchedule (جدولة تقرير المستخدمين)
كيان يمثل جدولة التقارير الدورية:
- معرف الجدولة (ID)
- معرف التقرير (ReportID)
- اسم الجدولة (ScheduleName)
- وصف الجدولة (Description)
- نوع التكرار (RecurrenceType) - يومي، أسبوعي، شهري
- إعدادات التكرار (RecurrenceSettings)
- تاريخ البدء (StartDate)
- تاريخ الانتهاء (EndDate)
- حالة الجدولة (Status)
- طريقة التوزيع (DeliveryMethod) - بريد إلكتروني، حفظ، إشعار
- قائمة المستلمين (RecipientsList)
- خيارات التنسيق (FormatOptions)
- إعدادات الترشيح (FilterSettings)
- المستخدم المنشئ (CreatedBy)
- تاريخ الإنشاء (CreatedDate)
- آخر تنفيذ (LastRun)
- نتيجة آخر تنفيذ (LastRunResult)

#### UserReportExecution (تنفيذ تقرير المستخدمين)
كيان يسجل عمليات تنفيذ التقارير:
- معرف التنفيذ (ID)
- معرف التقرير (ReportID)
- معرف المستخدم (UserID)
- تاريخ ووقت التنفيذ (ExecutionDateTime)
- مدة التنفيذ (DurationMS)
- معايير التنفيذ (ExecutionCriteria)
- عدد النتائج (ResultCount)
- حالة التنفيذ (Status)
- رسالة الخطأ (ErrorMessage) - إن وجدت
- أسلوب التنفيذ (ExecutionMode) - فوري، مجدول، خلفي
- معرف جدولة التقرير (ScheduleID) - إذا كان مجدولاً
- مرجع النتائج (ResultReference)
- موارد النظام المستخدمة (SystemResources)
- سياق التنفيذ (ExecutionContext)

#### UserReportTemplate (قالب تقرير المستخدمين)
كيان يمثل قوالب التقارير القابلة لإعادة الاستخدام:
- معرف القالب (ID)
- اسم القالب (TemplateName)
- وصف القالب (Description)
- نوع القالب (TemplateType)
- هيكل القالب (TemplateStructure)
- إعدادات القالب (TemplateSettings)
- المستخدم المنشئ (CreatedBy)
- تاريخ الإنشاء (CreatedDate)
- المستخدم المعدل (ModifiedBy)
- تاريخ التعديل (ModifiedDate)
- حالة القالب (Status)
- إعدادات التنسيق (FormattingSettings)
- إعدادات الوصول (AccessSettings)
- إعدادات التخصيص (CustomizationSettings)
- الإصدار (Version)

#### UserReportLog (سجل تقارير المستخدمين)
كيان يسجل تاريخ العمليات على التقارير:
- معرف السجل (ID)
- معرف التقرير (ReportID)
- معرف المستخدم (UserID)
- نوع العملية (OperationType) - إنشاء، تعديل، تنفيذ، إلغاء، تصدير
- تاريخ العملية (OperationDate)
- وصف العملية (Description)
- معلومات إضافية (AdditionalInfo)
- مرجع الكيان (EntityReference)
- سياق العملية (OperationContext)
- مدة العملية (DurationMS)
- حالة العملية (Status)
- تفاصيل الخطأ (ErrorDetails) - إن وجدت

### الأوامر (Commands)

#### CreateUserReportCommand (أمر إنشاء تقرير مستخدمين جديد)
ينشئ تقرير مستخدمين جديد في النظام.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية المستخدم لإنشاء تقارير
- التحقق من صحة بيانات التقرير الأساسية
- التحقق من عدم تكرار رمز التقرير
- التحقق من صحة تصنيف التقرير
- إنشاء التقرير بحالة "مسودة" أولية
- تعيين المستخدم المنشئ وتاريخ الإنشاء
- تطبيق إعدادات العرض الافتراضية
- إنشاء تخطيط افتراضي للتقرير
- تطبيق إعدادات الوصول المناسبة
- تسجيل عملية الإنشاء في سجل التقارير

#### UpdateUserReportCommand (أمر تحديث تقرير مستخدمين)
يحدث تقرير مستخدمين موجود.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية المستخدم لتعديل التقرير
- التحقق من وجود التقرير وإمكانية تعديله
- التحقق من صحة البيانات المحدثة
- تحديث معلومات التقرير الأساسية
- تحديث إعدادات العرض والتخطيط
- تحديث معايير التقرير
- تحديث إعدادات الوصول إذا لزم الأمر
- زيادة رقم إصدار التقرير
- تحديث المستخدم المعدل وتاريخ التعديل
- تسجيل عملية التحديث في سجل التقارير

#### AddReportCriteriaCommand (أمر إضافة معايير للتقرير)
يضيف معايير جديدة لتقرير المستخدمين.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية المستخدم لتعديل التقرير
- التحقق من وجود التقرير وإمكانية تعديله
- التحقق من صحة المعايير المضافة
- التحقق من تناسق أنواع الحقول والقيم
- التحقق من صحة الروابط المنطقية بين المعايير
- إضافة المعايير الجديدة مع تعيين تسلسل مناسب
- تحديث المعايير المرتبطة إذا لزم الأمر
- تطبيق قواعد التحقق المخصصة لنوع التقرير
- تحديث المستخدم المعدل وتاريخ التعديل
- تسجيل العملية في سجل التقارير

#### UpdateReportLayoutCommand (أمر تحديث تخطيط التقرير)
يحدث تخطيط عرض تقرير المستخدمين.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية المستخدم لتعديل تخطيط التقرير
- التحقق من وجود التقرير والتخطيط
- التحقق من صحة إعدادات التخطيط الجديدة
- التحقق من توافق الحقول المعروضة مع نوع التقرير
- تحديث إعدادات التخطيط والعرض
- تحديث إعدادات الرسوم البيانية إذا كانت موجودة
- تطبيق التنسيقات والتجميعات الجديدة
- حفظ التخطيط كإصدار جديد
- تحديث المستخدم المعدل وتاريخ التعديل
- تسجيل عملية التحديث في سجل التقارير

#### ExecuteUserReportCommand (أمر تنفيذ تقرير المستخدمين)
ينفذ تقرير المستخدمين ويعالج النتائج.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية المستخدم لتنفيذ التقرير
- التحقق من وجود التقرير وأنه في حالة نشطة
- التحقق من صحة معايير التنفيذ
- تحسين استعلام التقرير للأداء الأمثل
- تنفيذ استعلام التقرير وتجميع البيانات
- معالجة وتنسيق النتائج حسب إعدادات التخطيط
- تسجيل معلومات التنفيذ (وقت، مدة، عدد النتائج)
- تخزين نتائج التقرير مؤقتاً للمشاركة أو التصدير
- تسجيل الأخطاء إذا حدثت
- تسجيل عملية التنفيذ في سجل التقارير

#### ScheduleUserReportCommand (أمر جدولة تقرير المستخدمين)
يقوم بإعداد جدولة لتنفيذ التقرير بشكل دوري.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية المستخدم لجدولة التقارير
- التحقق من وجود التقرير وأنه قابل للجدولة
- التحقق من صحة إعدادات الجدولة
- التحقق من صلاحية قائمة المستلمين
- التحقق من صحة خيارات التنسيق والتوزيع
- إنشاء جدولة جديدة مع تحديد تواريخ البدء والانتهاء
- إعداد المهمة المجدولة في نظام الجدولة
- تحديد معايير التقرير للتنفيذ المجدول
- تعيين المستخدم المنشئ وتاريخ الإنشاء
- تسجيل عملية الجدولة في سجل التقارير

#### ExportUserReportCommand (أمر تصدير تقرير المستخدمين)
يقوم بتصدير نتائج التقرير إلى تنسيق محدد.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية المستخدم لتصدير التقارير
- التحقق من وجود نتائج التقرير المراد تصديرها
- التحقق من صحة خيارات التصدير
- معالجة وتنسيق البيانات حسب تنسيق التصدير
- تطبيق قوالب التصدير المناسبة
- معالجة البيانات الكبيرة بكفاءة
- إنشاء الملف المصدر بالتنسيق المطلوب
- تطبيق خيارات الأمان على الملف المصدر
- تسجيل حجم ونوع وتفاصيل الملف المصدر
- تسجيل عملية التصدير في سجل التقارير

#### ShareUserReportCommand (أمر مشاركة تقرير المستخدمين)
يقوم بمشاركة التقرير مع مستخدمين آخرين.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية المستخدم لمشاركة التقارير
- التحقق من وجود التقرير وإمكانية مشاركته
- التحقق من صلاحية قائمة المستخدمين المستهدفين
- التحقق من صحة إعدادات المشاركة
- إنشاء روابط مشاركة آمنة حسب الحاجة
- تحديد صلاحيات الوصول للمستخدمين المشاركين
- إعداد إشعارات للمستخدمين المستهدفين
- تطبيق قيود المشاهدة والتعديل
- تسجيل معلومات المشاركة ومدتها
- تسجيل عملية المشاركة في سجل التقارير

### الاستعلامات (Queries)

#### GetUserReportByIdQuery (استعلام للحصول على تقرير برقمه)
استرجاع تفاصيل تقرير مستخدمين محدد برقمه.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية المستخدم للوصول للتقرير
- استرجاع معلومات التقرير الأساسية
- استرجاع معايير التقرير المرتبطة
- استرجاع تخطيط التقرير وإعدادات العرض
- استرجاع معلومات الجدولة إذا كانت موجودة
- استرجاع إحصائيات آخر تنفيذ للتقرير
- التحقق من صلاحيات المستخدم على كل جزء من التقرير
- توفير معلومات عن إصدارات التقرير
- دعم العرض الموجز أو المفصل للتقرير
- تتبع عمليات الوصول للتقرير

#### ListUserReportsQuery (استعلام لعرض قائمة التقارير)
استرجاع قائمة تقارير المستخدمين حسب معايير محددة.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية المستخدم للوصول لقائمة التقارير
- دعم تصفية التقارير حسب النوع والتصنيف
- دعم البحث في أسماء ووصف التقارير
- دعم تصفية التقارير حسب المستخدم المنشئ
- دعم تصفية التقارير حسب تاريخ الإنشاء أو التعديل
- دعم تصفية التقارير حسب الحالة
- دعم فرز النتائج حسب معايير مختلفة
- دعم استرجاع التقارير المفضلة أو الأخيرة
- دعم الصفحات لتحسين أداء عرض القوائم الكبيرة
- جمع إحصائيات حول استخدام التقارير

#### GetReportExecutionHistoryQuery (استعلام لسجل تنفيذ التقارير)
استرجاع سجل تنفيذ تقرير مستخدمين محدد.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية المستخدم للوصول لسجل التنفيذ
- استرجاع تاريخ تنفيذ التقرير المحدد
- دعم تصفية السجل حسب الفترة الزمنية
- دعم تصفية السجل حسب المستخدم المنفذ
- دعم تصفية السجل حسب حالة التنفيذ
- استرجاع إحصائيات تنفيذ التقرير (متوسط الوقت، عدد النتائج)
- عرض تفاصيل معايير كل عملية تنفيذ
- تحليل اتجاهات وأنماط تنفيذ التقرير
- دعم الصفحات لتحسين عرض السجلات الكبيرة
- استرجاع معلومات الأخطاء والمشكلات السابقة

#### GetReportScheduleDetailsQuery (استعلام لتفاصيل جدولة التقارير)
استرجاع تفاصيل جدولة تقرير محدد.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية المستخدم للوصول لجدولة التقارير
- استرجاع معلومات الجدولة الأساسية
- استرجاع تاريخ تنفيذ الجدولة السابق والقادم
- استرجاع قائمة المستلمين وإعدادات التوزيع
- استرجاع معايير التقرير المستخدمة في الجدولة
- استرجاع إحصائيات نجاح وفشل التنفيذ المجدول
- عرض معلومات عن آخر عملية تنفيذ مجدولة
- التحقق من حالة الجدولة وتحديثها إذا لزم الأمر
- استرجاع تاريخ التعديلات على الجدولة
- عرض تفاصيل الأخطاء السابقة في التنفيذ المجدول

#### GetReportTemplatesQuery (استعلام لقوالب التقارير)
استرجاع قائمة قوالب التقارير المتاحة.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية المستخدم للوصول لقوالب التقارير
- استرجاع قائمة القوالب حسب نوع التقرير
- دعم تصفية القوالب حسب التصنيف والاستخدام
- دعم البحث في أسماء ووصف القوالب
- استرجاع معلومات هيكل وإعدادات القوالب
- دعم تصفية القوالب حسب المستخدم المنشئ
- عرض إحصائيات استخدام كل قالب
- استرجاع معلومات آخر تحديث للقالب
- دعم الصفحات لتحسين عرض القوالب المتعددة
- التحقق من توافق القوالب مع إصدار النظام الحالي

#### GetUserReportDataQuery (استعلام لبيانات التقرير)
استرجاع بيانات تقرير محدد حسب المعايير.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية المستخدم للوصول لبيانات التقرير
- بناء وتنفيذ استعلام البيانات حسب معايير التقرير
- تطبيق قيود وتصفية البيانات حسب صلاحيات المستخدم
- معالجة وتنسيق البيانات حسب تخطيط التقرير
- تطبيق إعدادات التجميع والترتيب
- تحسين أداء الاستعلام للتعامل مع حجم البيانات
- دعم استرجاع البيانات على دفعات للتقارير الكبيرة
- حساب المجاميع والإحصائيات المطلوبة
- التحقق من جودة واكتمال البيانات
- تسجيل معلومات تنفيذ الاستعلام للتحليل والتحسين 

## اختصارات لوحة المفاتيح وأزرار الشاشة السريعة

### اختصارات لوحة المفاتيح
- **F2**: إنشاء تقرير جديد
- **F3**: فتح تقرير موجود
- **F4**: حفظ التقرير الحالي
- **F5**: تحديث بيانات التقرير
- **F6**: تنفيذ التقرير
- **F7**: تصدير التقرير
- **F8**: طباعة التقرير
- **F9**: مشاركة التقرير
- **F10**: حفظ التقرير كقالب
- **Ctrl+A**: تحديد جميع عناصر التقرير
- **Ctrl+S**: حفظ التقرير
- **Ctrl+P**: طباعة التقرير
- **Ctrl+F**: البحث في نتائج التقرير
- **Ctrl+N**: إنشاء تقرير جديد
- **Ctrl+O**: فتح تقرير
- **Ctrl+E**: تحرير معايير التقرير
- **Ctrl+D**: إضافة التقرير للمفضلة
- **Ctrl+L**: تخطيط التقرير
- **Ctrl+G**: تجميع البيانات
- **Ctrl+T**: جدولة تقرير المستخدمين
- **Alt+X**: إغلاق الشاشة

### أزرار الشاشة السريعة
- **زر إنشاء تقرير جديد**: إنشاء تقرير مستخدمين جديد
- **زر فتح تقرير**: فتح تقرير موجود
- **زر حفظ**: حفظ التقرير الحالي
- **زر تنفيذ**: تنفيذ التقرير بالمعايير الحالية
- **زر معايير التقرير**: فتح نافذة إعداد معايير التقرير
- **زر تخطيط التقرير**: فتح نافذة تخصيص تخطيط التقرير
- **زر تصدير**: تصدير نتائج التقرير
- **زر طباعة**: طباعة التقرير
- **زر مشاركة**: مشاركة التقرير مع آخرين
- **زر جدولة**: جدولة تنفيذ التقرير
- **زر المفضلة**: إضافة/إزالة التقرير من المفضلة
- **زر المزيد**: عرض المزيد من الخيارات
- **زر تحديث**: تحديث بيانات التقرير
- **زر حفظ كقالب**: حفظ التقرير كقالب
- **زر التصفية السريعة**: تطبيق تصفية سريعة على النتائج
- **زر تخصيص الأعمدة**: تخصيص الأعمدة المعروضة
- **زر المساعدة**: عرض تعليمات التقرير

## ملاحظات تقنية إضافية

### اعتبارات التصميم
- **معمارية متعددة الطبقات**: تطبيق معمارية متعددة الطبقات لفصل عرض التقارير عن معالجة البيانات
- **نمط CQRS**: استخدام نمط فصل مسؤولية القراءة عن الكتابة لتحسين أداء التقارير
- **تخزين مؤقت ذكي**: تطبيق استراتيجيات للتخزين المؤقت لتحسين أداء التقارير المتكررة
- **استقلالية وحدات التقارير**: تصميم وحدات تقارير مستقلة قابلة للتوسع
- **سياسة تدفق البيانات**: تصميم يحقق الكفاءة في تدفق البيانات من المصدر إلى العرض
- **تصميم متجاوب**: واجهة مستخدم متجاوبة تعمل على مختلف أحجام الشاشات والأجهزة
- **قابلية التخصيص**: تصميم يسمح بتخصيص واسع للتقارير دون تعديل الكود الأساسي

### تحسينات الأداء
- **تحسين استعلامات التقارير**: تحسين بنية الاستعلامات للتعامل مع كميات بيانات كبيرة
- **معالجة على دفعات**: تنفيذ تقنيات المعالجة على دفعات للتقارير ذات البيانات الضخمة
- **تأجيل تحميل البيانات**: تحميل البيانات حسب الحاجة لتحسين سرعة التحميل الأولية
- **تقنيات فهرسة متقدمة**: استخدام استراتيجيات فهرسة لتسريع استعلامات التقارير
- **تحسين موارد الخادم**: تخصيص موارد الخادم بشكل ديناميكي حسب تعقيد التقرير
- **معالجة متوازية**: استخدام تقنيات المعالجة المتوازية لتسريع تنفيذ التقارير المعقدة
- **استباق التقارير الشائعة**: توليد مسبق للتقارير الشائعة الاستخدام في أوقات قليلة الحمل

### متطلبات الأمان
- **تحكم دقيق بالصلاحيات**: تطبيق نظام صلاحيات متعدد المستويات للوصول للتقارير والبيانات
- **تشفير البيانات الحساسة**: تشفير البيانات الحساسة في التقارير المصدرة والمشتركة
- **تدقيق شامل**: تسجيل جميع عمليات الوصول وتنفيذ التقارير
- **حماية الوصول**: تأمين روابط مشاركة التقارير ضد الوصول غير المصرح به
- **التحقق من صحة المعايير**: التحقق من صحة وأمان معايير التقارير المدخلة
- **سياسات انتهاء الصلاحية**: تطبيق سياسات انتهاء صلاحية التقارير المشتركة والروابط
- **تتبع مصدر البيانات**: تتبع كامل لمصدر البيانات في كل تقرير

### الاندماج مع النظام
1. **ربط الشاشة مع نظام المستخدمين**:
   - تكامل مع إدارة المستخدمين لصلاحيات الوصول والمشاهدة
   - استرجاع معلومات المستخدمين لتقارير النشاط
   - ربط مع هيكل المجموعات والأدوار
   - تتبع عمليات المستخدمين المرتبطة بالتقارير

2. **ربط الشاشة مع نظام الإشعارات**:
   - إرسال إشعارات للمستخدمين عند توفر تقارير جديدة
   - تنبيهات للأنماط غير العادية المكتشفة في التقارير
   - إشعارات بتنفيذ التقارير المجدولة
   - تنبيهات للتغييرات في التقارير المشتركة

3. **ربط الشاشة مع نظام التقويم**:
   - عرض جدولة التقارير في تقويم النظام
   - ربط المواعيد والأحداث مع التقارير ذات الصلة
   - تخطيط توقيت تنفيذ التقارير الدورية
   - تنسيق مواعيد توزيع التقارير

4. **ربط الشاشة مع نظام العمليات**:
   - استرجاع بيانات العمليات لتحليلها في التقارير
   - تتبع تأثير العمليات على مؤشرات الأداء
   - ربط التقارير مع مخرجات الوحدات المختلفة
   - توفير تحليل متكامل للعمليات والمستخدمين

5. **ربط الشاشة مع نظام البريد الإلكتروني**:
   - إرسال التقارير آلياً عبر البريد الإلكتروني
   - إشعارات البريد الإلكتروني للتقارير المجدولة
   - إرسال تنبيهات عن الأنماط غير العادية
   - جدولة توزيع التقارير الدورية

6. **ربط الشاشة مع نظام الأرشفة**:
   - أرشفة التقارير القديمة تلقائياً
   - حفظ سجل تاريخي للتقارير المهمة
   - استعادة التقارير المؤرشفة عند الحاجة
   - تطبيق سياسات حفظ وإزالة التقارير

### اعتبارات التوسعة
- **إطار عمل قابل للتوسعة**: تصميم إطار عمل للتقارير يسمح بإضافة أنواع جديدة بسهولة
- **نظام القوالب المرن**: بنية قوالب مرنة تدعم إضافة أنماط عرض جديدة
- **واجهة برمجة تطبيقات موثقة**: توفير واجهة برمجة تطبيقات تتيح تطوير تقارير مخصصة
- **تطوير تقارير خارجية**: دعم تكامل أدوات تقارير خارجية
- **النماذج القابلة للتخصيص**: دعم إنشاء نماذج تقارير مخصصة لاحتياجات محددة
- **معالجة لغات الاستعلام المخصصة**: دعم لغات استعلام متعددة لمرونة أكبر
- **إضافة مصادر بيانات جديدة**: قدرة على دمج مصادر بيانات جديدة بسهولة

### إمكانيات التحليل المتقدم
- **دمج تقنيات الذكاء الاصطناعي**: استخدام خوارزميات الذكاء الاصطناعي لتحليل أنماط الاستخدام
- **التعلم الآلي لاكتشاف الأنماط**: تطبيق تقنيات التعلم الآلي لاكتشاف الأنماط غير العادية
- **التحليل التنبؤي**: تقديم تنبؤات حول اتجاهات استخدام النظام
- **تقنيات التنقيب عن البيانات**: استخدام تقنيات التنقيب عن البيانات لاستخراج رؤى مفيدة
- **لوحات معلومات تفاعلية**: توفير لوحات معلومات تفاعلية للتحليل الديناميكي
- **تحليل السيناريوهات**: دعم تحليل سيناريوهات "ماذا لو" للمساعدة في اتخاذ القرارات
- **تحليل الشبكات الاجتماعية**: تطبيق تقنيات تحليل الشبكات لفهم التفاعلات بين المستخدمين

### مخرجات التقارير المتنوعة
- **تقارير تفاعلية على الويب**: دعم تقارير تفاعلية تعمل عبر متصفح الويب
- **تطبيقات الهاتف المحمول**: توفير تقارير مخصصة للأجهزة المحمولة
- **تقارير مدمجة**: إمكانية دمج التقارير في تطبيقات وشاشات أخرى
- **لوحات المعلومات التنفيذية**: توفير لوحات معلومات مخصصة للإدارة التنفيذية
- **تنبيهات في الوقت الحقيقي**: إرسال تنبيهات فورية عن الأحداث المهمة
- **تقارير مستندة إلى الموقع**: دعم التقارير المرتبطة بالموقع الجغرافي
- **تقارير خارج الإنترنت**: دعم تقارير يمكن استخدامها دون اتصال بالإنترنت 