# شاشة قيد اليومية (Journal Entry)

## نظرة عامة
شاشة قيد اليومية هي واحدة من أهم الشاشات في نظام الأونكس برو ERP حيث تتيح للمستخدمين إنشاء وإدارة القيود المحاسبية. تعتبر هذه الشاشة الواجهة الأساسية لتسجيل المعاملات المالية في دفتر الأستاذ العام، وتعكس مبدأ القيد المزدوج في المحاسبة حيث يجب أن تتساوى الحسابات المدينة مع الحسابات الدائنة.

## مكونات واجهة المستخدم

### القسم العلوي (معلومات رأس القيد)
- **رقم القيد**: رقم فريد يتم إنشاؤه تلقائياً للقيد
- **تاريخ القيد**: تاريخ إجراء المعاملة المالية
- **الوصف**: وصف عام للقيد المحاسبي
- **المرجع**: رقم مستند خارجي أو مرجع للقيد
- **نوع القيد**: قيد افتتاحي، قيد يومي، قيد إقفال، إلخ
- **العملة**: عملة القيد الرئيسية
- **سعر الصرف**: سعر التحويل مقابل العملة الأساسية
- **الفرع**: الفرع الذي يتم فيه تسجيل القيد
- **الحالة**: مسودة، معتمد، مرحّل، ملغى
- **مصدر القيد**: يدوي، آلي (من نظام آخر)، مستورد
- **الدفتر المحاسبي**: دفتر اليومية العامة، المشتريات، المبيعات، أو دفاتر محاسبية أخرى
- **الفترة المحاسبية**: الفترة المحاسبية التي ينتمي إليها القيد

### حقول المرجعيات
- **رقم المستند المرجعي**: رقم المستند الأصلي المرتبط بالقيد (مثل رقم الفاتورة)
- **نوع المستند المرجعي**: فاتورة مبيعات، فاتورة مشتريات، سند قبض، سند صرف، إلخ
- **تاريخ المستند المرجعي**: تاريخ المستند الأصلي
- **ملاحظات إضافية**: ملاحظات خاصة بالقيد

### جدول تفاصيل القيد
- **الحساب**: رقم الحساب أو اسمه (مرتبط بدليل الحسابات)
- **الوصف**: وصف البند المحدد
- **المركز**: مركز التكلفة المرتبط بالبند (إن وجد)
- **المشروع**: المشروع المرتبط بالبند (إن وجد)
- **المدين**: قيمة المبلغ المدين
- **الدائن**: قيمة المبلغ الدائن
- **العملة**: عملة البند (قد تختلف عن عملة القيد الرئيسية)
- **سعر الصرف**: سعر صرف خاص بالبند (إن اختلف)
- **الصندوق**: الصندوق المرتبط بالبند (للعمليات النقدية)
- **البنك/الحساب البنكي**: البنك والحساب البنكي المرتبط بالبند (للعمليات البنكية)
- **العميل**: العميل المرتبط بالبند (لقيود المبيعات والذمم المدينة)
- **المورد**: المورد المرتبط بالبند (لقيود المشتريات والذمم الدائنة)
- **الموظف**: الموظف المرتبط بالبند (لعمليات الرواتب والسلف)
- **الأصل**: الأصل الثابت المرتبط بالبند (لقيود الأصول الثابتة)
- **الصنف**: الصنف المرتبط بالبند (لقيود المخزون)
- **المستودع**: المستودع المرتبط بالبند (لعمليات المخزون)
- **وحدة القياس**: وحدة قياس الكميات (للبنود المرتبطة بالمخزون)
- **الكمية**: الكمية المرتبطة بالبند (للبنود المرتبطة بالمخزون)
- **التكلفة الوحدوية**: تكلفة الوحدة الواحدة (للبنود المرتبطة بالمخزون)
- **رقم الشيك**: رقم الشيك المرتبط بالبند (للعمليات البنكية)
- **تاريخ الشيك**: تاريخ الشيك المرتبط بالبند (للعمليات البنكية)
- **رقم الضريبة**: رقم ضريبة القيمة المضافة المرتبط بالبند
- **نسبة الضريبة**: نسبة الضريبة المطبقة على البند
- **قيمة الضريبة**: قيمة الضريبة المحسوبة

### منطقة الإجماليات
- **إجمالي المدين**: مجموع المبالغ المدينة
- **إجمالي الدائن**: مجموع المبالغ الدائنة
- **الفرق**: الفرق بين المدين والدائن (يجب أن يكون صفراً للقيود المتوازنة)
- **إجمالي بالعملة الأساسية**: المجاميع محولة للعملة الأساسية للنظام
- **إجمالي الضرائب**: مجموع ضرائب القيمة المضافة المطبقة على البنود
- **عدد الأسطر**: عدد أسطر القيد الإجمالي

### شريط الأدوات
- زر إنشاء قيد جديد
- زر حفظ القيد
- زر اعتماد القيد
- زر ترحيل القيد
- زر إلغاء القيد
- زر طباعة القيد
- زر تكرار القيد
- زر عكس القيد (إنشاء قيد عكسي)
- زر نسخ القيد
- زر توزيع المبالغ على مراكز التكلفة
- زر ربط المستندات المرجعية
- زر استيراد بنود من Excel
- زر تصدير القيد إلى Excel
- زر توليد قيود الضرائب التلقائية
- زر التحقق من توازن القيد
- زر عرض حركة الحساب
- زر إنشاء قيود متكررة

### ميزات إضافية
- محرك بحث للقيود السابقة
- مرفقات المستندات الداعمة
- سجل التغييرات والتعديلات
- إمكانية إرفاق المستندات والصور
- نظام تنبيهات للقيود غير المتوازنة
- عرض سريع لرصيد الحساب المحدد
- إمكانية الاطلاع على مسار تدقيق كامل للقيد

## الوظائف الرئيسية

### إدارة القيود
1. **إنشاء قيد جديد**: إنشاء قيد محاسبي جديد مع تفاصيل المدين والدائن
2. **تعديل قيد**: تعديل القيود غير المرحلة
3. **حذف قيد**: حذف القيود غير المرحلة
4. **نسخ قيد**: إنشاء قيد جديد كنسخة من قيد سابق
5. **عكس قيد**: إنشاء قيد بقيم عكسية لقيد سابق
6. **استيراد قيود**: استيراد قيود من ملفات Excel أو أنظمة أخرى
7. **تصدير قيود**: تصدير القيود إلى Excel أو PDF

### دورة حياة القيد
1. **حفظ كمسودة**: حفظ القيد كمسودة قابلة للتعديل
2. **اعتماد القيد**: تغيير حالة القيد إلى معتمد بعد مراجعته
3. **ترحيل القيد**: ترحيل القيد إلى دفتر الأستاذ العام وتأثيره على أرصدة الحسابات
4. **إلغاء القيد**: إلغاء قيد سابق (مع الاحتفاظ بسجل التغييرات)
5. **فتح قيد مرحل**: إعادة فتح قيد مرحل سابقاً (للمستخدمين ذوي الصلاحية)
6. **تعليق قيد**: وضع القيد في حالة معلق لمراجعته لاحقاً

### وظائف خاصة
1. **القيود المتكررة**: إمكانية إعداد قيود متكررة تتم بشكل دوري
2. **القيود التلقائية**: قيود يتم إنشاؤها تلقائياً بناءً على عمليات أخرى في النظام
3. **الترحيل الجماعي**: ترحيل مجموعة من القيود دفعة واحدة
4. **توزيع التكاليف**: توزيع مبلغ على عدة مراكز تكلفة أو مشاريع
5. **إدارة الضرائب**: احتساب وتسجيل ضريبة القيمة المضافة آلياً
6. **التسوية التلقائية**: تسوية أرصدة الحسابات والبنود المفتوحة
7. **إدارة العملات**: التعامل مع العملات المتعددة وفروقات أسعار الصرف
8. **قيود المخزون**: ربط الحسابات بحركات المخزون
9. **قيود الأصول**: ربط الحسابات بالأصول الثابتة وعمليات الإهلاك
10. **قيود البنود المفتوحة**: ربط القيود بالفواتير والمستندات المفتوحة

### وظائف الإدارة والتقارير
1. **التدقيق والمراجعة**: مراجعة القيود وتدقيقها قبل الاعتماد
2. **سجل التغييرات**: عرض تاريخ كامل للتغييرات على القيود
3. **تقارير الترحيل**: تقارير خاصة بعمليات الترحيل ونتائجها
4. **تقارير الأداء**: تحليل أداء عمليات القيود وكفاءتها
5. **إدارة الصلاحيات**: التحكم بصلاحيات المستخدمين في التعامل مع القيود

## العمليات المتقدمة

### التعامل مع العملات المتعددة
- تحديد العملة لكل بند من بنود القيد
- إمكانية عرض القيم المكافئة بالعملة الأساسية
- تحديث أسعار الصرف تلقائياً أو يدوياً
- احتساب وتسجيل فروقات العملة آلياً
- دعم تقريب المبالغ حسب العملة
- دعم تعديل سعر الصرف لكل بند على حدة
- إمكانية تحديد سياسة تقييم العملات (متوسط، FIFO، إلخ)

### عمليات البنوك والصناديق
- ربط القيود بحسابات بنكية محددة
- دعم إدخال معلومات الشيكات والتحويلات
- تتبع حالة الشيكات (مستلمة، مصروفة، محصلة، مرتجعة)
- ربط القيود بالكشوفات البنكية
- دعم عمليات المطابقة البنكية
- ربط القيود بصناديق النقد في الفروع المختلفة
- تسجيل حركات الصناديق بين الفروع
- تسجيل تسليم وتسلم النقد بين أمناء الصناديق

### عمليات العملاء والموردين
- ربط القيود بحسابات العملاء والموردين
- تسجيل الفواتير والدفعات للعملاء والموردين
- ربط القيود بمستندات المبيعات والمشتريات
- تسوية الدفعات مع الفواتير المفتوحة
- إدارة الدفعات المقدمة والمرتجعات
- تتبع أعمار الديون للعملاء والموردين
- ربط القيود بالاعتمادات المستندية
- تسجيل وتتبع ضرائب المبيعات والمشتريات

### عمليات المخزون والأصول
- ربط القيود بحركات المخزون
- تسجيل تكاليف المخزون وتوزيعها
- ربط القيود بعمليات الجرد
- تسجيل قيود تسوية المخزون
- ربط القيود بالأصول الثابتة
- تسجيل قيود إهلاك الأصول
- تسجيل عمليات شراء وبيع الأصول
- تتبع القيمة الدفترية للأصول

### عمليات الرواتب والموظفين
- ربط القيود بنظام الرواتب
- تسجيل مستحقات الموظفين
- تسجيل السلف والقروض للموظفين
- تسجيل مصاريف الموظفين
- توزيع رواتب الموظفين على مراكز التكلفة
- حسابات التأمينات الاجتماعية وضرائب الرواتب

### التقارير والاستعلامات
- عرض قائمة بالقيود المحاسبية
- تصفية القيود حسب الفترة، النوع، الحالة، إلخ
- تصدير القيود بتنسيقات مختلفة (Excel، PDF)
- طباعة سند قيد
- تقارير القيود حسب الحساب
- تقارير القيود حسب المرجع
- تقارير القيود حسب المستخدم
- تقارير القيود غير المتوازنة
- تقارير تدقيق تغييرات القيود

### الارتباط مع الشاشات الأخرى
- **دليل الحسابات**: اختيار الحسابات من دليل الحسابات
- **مراكز التكلفة**: ربط بنود القيد بمراكز التكلفة
- **المشاريع**: ربط بنود القيد بالمشاريع
- **الفواتير والمستندات**: إنشاء قيود تلقائية من الفواتير والمستندات الأخرى
- **إدارة النقد والبنوك**: ربط القيود بالحسابات البنكية والصناديق
- **إدارة المخزون**: ربط القيود بحركات المخزون
- **الأصول الثابتة**: ربط القيود بسجلات الأصول
- **شؤون الموظفين**: ربط القيود بالرواتب والمستحقات
- **إدارة علاقات العملاء**: ربط القيود بحسابات العملاء
- **إدارة الموردين**: ربط القيود بحسابات الموردين
- **الموازنات التقديرية**: مقارنة القيود بالموازنات
- **إدارة الضرائب**: ربط القيود بنظام الضرائب
- **التقارير المالية**: عرض القيود في التقارير المالية

## مكونات طبقة التطبيق

### الكيانات (Entities)

#### JournalEntry
كيان رئيسي يمثل قيد اليومية ويحتوي على:
- رقم القيد
- تاريخ القيد
- الوصف
- المرجع
- نوع القيد
- العملة
- سعر الصرف
- الحالة
- الفرع
- الدفتر المحاسبي
- الفترة المحاسبية
- المستند المرجعي
- نوع المستند المرجعي
- مصدر القيد
- معلومات الإنشاء والتعديل
- رموز الموافقة والترحيل

#### JournalEntryLine
كيان يمثل سطر من أسطر القيد ويحتوي على:
- رقم السطر
- رقم الحساب
- الوصف
- مركز التكلفة
- المشروع
- المبلغ المدين
- المبلغ الدائن
- العملة
- سعر الصرف
- الصندوق
- البنك/الحساب البنكي
- العميل
- المورد
- الموظف
- الأصل
- الصنف
- المستودع
- الكمية
- وحدة القياس
- التكلفة الوحدوية
- رقم الشيك
- تاريخ الشيك
- معلومات الضريبة
- رقم البند المرجعي

#### JournalEntryAttachment
كيان يمثل المرفقات الخاصة بالقيد:
- رقم المرفق
- اسم الملف
- نوع الملف
- وصف المرفق
- محتوى الملف
- تاريخ الإرفاق
- المستخدم المرفق

#### JournalEntryCurrency
كيان يمثل عملات القيد:
- العملة
- سعر الصرف
- تاريخ سعر الصرف
- هل هي العملة الرئيسية

#### JournalEntryTaxInfo
كيان يمثل معلومات الضرائب في القيد:
- نوع الضريبة
- نسبة الضريبة
- مبلغ الضريبة
- الحساب الضريبي
- رقم التسجيل الضريبي
- تاريخ الضريبة

#### JournalEntryRecurrence
كيان يمثل معلومات تكرار القيد:
- نمط التكرار
- تاريخ البدء
- تاريخ الانتهاء
- عدد التكرارات
- آخر تاريخ تنفيذ
- التالي تاريخ تنفيذ
- حالة التكرار

### الأوامر (Commands)

#### CreateJournalEntryCommand
إنشاء قيد يومية جديد في النظام.

**منطق الأعمال والتحققات**:
- التأكد من وجود صلاحية إنشاء قيود محاسبية
- التحقق من تساوي إجمالي المدين والدائن
- التحقق من وجود الحسابات المستخدمة في دليل الحسابات
- التحقق من صحة مراكز التكلفة والمشاريع
- تطبيق سياسات ترقيم القيود وفقاً لإعدادات النظام
- تدقيق القيم لمنع الأرقام السالبة في المدين والدائن
- التحقق من صحة العملات وأسعار الصرف
- التحقق من وجود المراجع (الصناديق، البنوك، العملاء، الموردين) في حال تحديدها
- التحقق من اتساق بيانات الضرائب إن وجدت
- التحقق من صحة معلومات المخزون والأصول إن وجدت

#### UpdateJournalEntryCommand
تحديث قيد يومية موجود مسبقاً.

**منطق الأعمال والتحققات**:
- التحقق من وجود القيد
- التأكد من أن القيد غير مرحل (لا يمكن تعديل القيود المرحلة)
- التحقق من تساوي إجمالي المدين والدائن بعد التعديل
- التحقق من وجود الحسابات المعدلة في دليل الحسابات
- تسجيل التغييرات في سجل المراجعة
- التحقق من صحة جميع المراجع الخارجية (العملاء، الموردين، البنوك، الصناديق)
- التحقق من صحة معلومات الضرائب المحدثة
- تدقيق تناسق عملات البنود مع العملة الرئيسية للقيد

#### ApproveJournalEntryCommand
اعتماد قيد يومية.

**منطق الأعمال والتحققات**:
- التحقق من وجود صلاحية اعتماد القيود
- التأكد من توازن القيد (تساوي المدين والدائن)
- التحقق من اكتمال البيانات الإلزامية
- تسجيل معلومات الاعتماد (المستخدم، التاريخ)
- التحقق من وجود جميع المستندات المرفقة الإلزامية
- التحقق من صحة جميع المراجع والعلاقات مع الكيانات الأخرى
- التحقق من عدم تجاوز حدود الصلاحيات المالية للمستخدم

#### PostJournalEntryCommand
ترحيل قيد يومية إلى دفتر الأستاذ العام.

**منطق الأعمال والتحققات**:
- التحقق من وجود صلاحية ترحيل القيود
- التأكد من أن القيد معتمد
- تحديث أرصدة الحسابات في دفتر الأستاذ
- التحقق من عدم وجود قفل للفترة المحاسبية
- تغيير حالة القيد إلى "مرحل"
- تسجيل تاريخ ووقت الترحيل والمستخدم المسؤول
- تحديث أرصدة العملاء والموردين إذا كان القيد مرتبطاً بهم
- تحديث حالة المستندات المرتبطة (مثل الفواتير المسددة)
- تحديث أرصدة الصناديق والبنوك إذا كان القيد مرتبطاً بها
- تنفيذ أي معالجات إضافية للضرائب أو تحديث سجلات الضرائب

#### DeleteJournalEntryCommand
حذف قيد يومية.

**منطق الأعمال والتحققات**:
- التحقق من وجود صلاحية حذف القيود
- التأكد من أن القيد غير مرحل
- تسجيل عملية الحذف في سجل المراجعة
- إزالة أي ارتباطات مع مستندات أو كيانات أخرى
- حذف المرفقات المرتبطة بالقيد
- التحقق من عدم ارتباط القيد بعمليات أخرى لا يمكن حذفها

#### ReverseJournalEntryCommand
إنشاء قيد عكسي.

**منطق الأعمال والتحققات**:
- التحقق من وجود صلاحية إنشاء قيود عكسية
- التأكد من وجود القيد الأصلي
- إنشاء قيد جديد بقيم معكوسة (تبديل المدين والدائن)
- الإشارة إلى رقم القيد الأصلي في وصف القيد العكسي
- نسخ جميع المراجع والعلاقات مع تحديثها بشكل مناسب
- التعامل مع العملات المتعددة وأسعار الصرف بشكل صحيح
- معالجة الضرائب وفروقاتها في القيد العكسي

#### CopyJournalEntryCommand
نسخ قيد يومية موجود.

**منطق الأعمال والتحققات**:
- التحقق من وجود صلاحية إنشاء قيود جديدة
- نسخ معلومات القيد الأصلي مع تعيين رقم جديد وتاريخ جديد
- تغيير الحالة إلى "مسودة"
- نسخ جميع أسطر القيد والمراجع المرتبطة
- تحديث أسعار الصرف للعملات حسب التاريخ الجديد
- خيار لنسخ المرفقات أو عدم نسخها

#### BulkPostJournalEntriesCommand
ترحيل مجموعة من القيود دفعة واحدة.

**منطق الأعمال والتحققات**:
- التحقق من صلاحيات الترحيل الجماعي
- التأكد من أن جميع القيود متوازنة ومعتمدة
- التحقق من عدم وجود قفل للفترة المحاسبية
- ترحيل القيود بترتيب منطقي (حسب التاريخ أو الأولوية)
- التعامل مع الأخطاء بشكل مناسب (تجاهل أو إيقاف العملية)
- توفير تقرير شامل بنتائج عملية الترحيل

#### CreateRecurringJournalEntryCommand
إنشاء قيد متكرر.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية إنشاء قيود متكررة
- التحقق من صحة نمط التكرار وفترات التكرار
- التأكد من صحة تواريخ البدء والانتهاء
- التأكد من توازن القيد الأساسي
- التحقق من صحة جميع المراجع والعلاقات
- تخزين قالب القيد لاستخدامه في التكرار

#### SetupTaxJournalEntryCommand
إعداد قيد ضريبي.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية إنشاء قيود ضريبية
- التحقق من صحة معلومات الضرائب والمعدلات
- التأكد من ارتباط الضرائب بالحسابات الضريبية الصحيحة
- التحقق من اكتمال معلومات التسجيل الضريبي
- توليد أسطر القيد الضريبي بشكل صحيح وفق القوانين

### الاستعلامات (Queries)

#### GetJournalEntryByIdQuery
استرجاع قيد محدد بواسطة الرقم التعريفي.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية الوصول للقيود المحاسبية
- التحقق من وجود القيد المطلوب
- استرجاع القيد مع كافة أسطره وتفاصيله
- استرجاع المراجع المرتبطة (العملاء، الموردين، الصناديق، البنوك)
- استرجاع معلومات الضرائب المرتبطة
- استرجاع معلومات المرفقات

#### GetJournalEntriesQuery
استرجاع قائمة القيود المحاسبية مع إمكانية التصفية والفرز.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية الوصول للقيود المحاسبية
- دعم التصفية حسب الفترة، النوع، الحالة، الحساب، إلخ
- دعم الفرز حسب التاريخ، الرقم، المبلغ، إلخ
- دعم الصفحات لعرض النتائج بشكل مجزأ
- دعم التصفية حسب العميل، المورد، الصندوق، البنك
- دعم التصفية حسب نوع المستند المرجعي أو رقمه
- دعم التصفية حسب المستخدم المنشئ أو المرحل

#### GetJournalEntryHistoryQuery
استرجاع سجل التغييرات على قيد محدد.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية الوصول لسجل المراجعة
- استرجاع كافة التغييرات التي تمت على القيد
- تضمين معلومات المستخدم والتاريخ والوقت والقيم القديمة والجديدة
- تنظيم التغييرات حسب تسلسلها الزمني
- دعم التصفية حسب نوع التغيير أو المستخدم

#### GetUnbalancedJournalEntriesQuery
استرجاع القيود غير المتوازنة (غير متساوية المدين والدائن).

**منطق الأعمال والتحققات**:
- التحقق من صلاحية الوصول للتقارير المحاسبية
- البحث عن القيود التي لا يتساوى فيها مجموع المدين مع مجموع الدائن
- تصفية النتائج حسب الفترة الزمنية
- تصنيف القيود حسب حجم الفرق بين المدين والدائن
- توفير معلومات عن سبب عدم التوازن إن أمكن

#### GetPendingJournalEntriesQuery
استرجاع القيود المعلقة (غير المرحلة).

**منطق الأعمال والتحققات**:
- التحقق من صلاحية الوصول للقيود المحاسبية
- البحث عن القيود بحالة "مسودة" أو "معتمد" وغير مرحلة
- تصفية النتائج حسب الفترة الزمنية
- ترتيب النتائج حسب الأقدمية أو حجم المبلغ
- توفير معلومات عن سبب التعليق إن وجد

#### GetJournalEntriesByReferenceQuery
استرجاع القيود المرتبطة بمستند مرجعي محدد.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية الوصول للقيود المحاسبية
- البحث عن القيود المرتبطة بمستند محدد (مثل فاتورة، سند قبض، إلخ)
- تصنيف القيود حسب نوعها وحالتها
- توفير معلومات عن العلاقة بين القيود والمستند المرجعي

#### GetJournalEntriesByEntityQuery
استرجاع القيود المرتبطة بكيان محدد (عميل، مورد، صندوق، بنك، إلخ).

**منطق الأعمال والتحققات**:
- التحقق من صلاحية الوصول للقيود المحاسبية
- البحث عن القيود المرتبطة بالكيان المحدد
- دعم تصفية النتائج حسب الفترة، الحالة، النوع، إلخ
- تصنيف القيود حسب المبلغ أو التاريخ

#### GetRecurringJournalEntriesQuery
استرجاع القيود المتكررة.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية الوصول للقيود المتكررة
- البحث عن القيود ذات نمط التكرار
- توفير معلومات عن نمط التكرار والتواريخ القادمة
- تصنيف القيود حسب حالة التكرار (نشط، متوقف، منتهي)

#### GetTaxJournalEntriesQuery
استرجاع القيود الضريبية.

**منطق الأعمال والتحققات**:
- التحقق من صلاحية الوصول للقيود الضريبية
- البحث عن القيود المرتبطة بالضرائب
- تصفية النتائج حسب نوع الضريبة، الفترة، الحالة
- توفير ملخص للمبالغ الضريبية حسب النوع أو الفترة

## منطق الأعمال والتحققات

### تحققات الوجود والتفرد
- تحقق من وجود الحسابات في دليل الحسابات
- تحقق من وجود مراكز التكلفة والمشاريع
- تحقق من تفرد أرقام القيود ضمن نطاق الترقيم المحدد

### فحص الصلاحيات
- صلاحيات إنشاء وتعديل وحذف القيود
- صلاحيات اعتماد القيود
- صلاحيات ترحيل القيود
- صلاحيات إنشاء قيود في فترات محاسبية مغلقة (للمستخدمين ذوي الصلاحيات العليا)

### تحققات اتساق البيانات
- توازن القيد (تساوي المدين والدائن)
- عدم وجود قيم سالبة في المدين أو الدائن
- عدم تكرار نفس الحساب في أكثر من سطر (يمكن دمجها)
- صحة العملات وأسعار الصرف

### معالجة الحالات الخاصة
- التعامل مع القيود متعددة العملات
- التعامل مع فروقات التقريب في أسعار الصرف
- معالجة القيود المتكررة والتلقائية
- التعامل مع قيود نهاية السنة وإقفال الحسابات

### استراتيجيات تحميل البيانات
- تحميل القيود مع أسطرها في عملية واحدة
- استرجاع معلومات الحسابات المرتبطة عند الحاجة
- الاستعلام الفعال عن القيود ضمن فترة زمنية محددة

### اعتبارات الأداء
- فهرسة جداول القيود للبحث السريع
- تقسيم النتائج إلى صفحات عند استعلام عدد كبير من القيود
- تنفيذ استدعاءات متعددة متوازية عند الحاجة

### خيارات التصفية والفرز
- تصفية حسب الفترة الزمنية (من تاريخ - إلى تاريخ)
- تصفية حسب الحالة (مسودة، معتمد، مرحل، ملغى)
- تصفية حسب نوع القيد (يومي، افتتاحي، إقفال، إلخ)
- تصفية حسب الحساب أو مجموعة حسابات
- تصفية حسب مركز التكلفة أو المشروع
- تصفية حسب المبلغ (أكبر من، أصغر من، يساوي)
- فرز حسب التاريخ، الرقم، المبلغ (تصاعدي أو تنازلي)

## معلومات تقنية إضافية

### الأحداث (Events)
- JournalEntryCreatedEvent: حدث إنشاء قيد جديد
- JournalEntryUpdatedEvent: حدث تعديل قيد
- JournalEntryApprovedEvent: حدث اعتماد قيد
- JournalEntryPostedEvent: حدث ترحيل قيد
- JournalEntryDeletedEvent: حدث حذف قيد
- JournalEntryReversedEvent: حدث عكس قيد

### تكامل النظام
- تكامل مع نظام الفواتير لإنشاء قيود تلقائية
- تكامل مع نظام المخزون لقيود تكلفة المبيعات
- تكامل مع نظام الرواتب لقيود المرتبات
- تكامل مع نظام الأصول الثابتة لقيود الإهلاك

### الاعتبارات الأمنية
- تشفير بيانات القيود الحساسة
- تسجيل كامل للتغييرات في سجل المراجعة
- تطبيق صارم لمصفوفة الصلاحيات
- منع التعديل على القيود المرحلة

## اختصارات لوحة المفاتيح وأزرار الشاشة السريعة

### أزرار الاختصارات الخاصة بالأونكس برو

#### الاختصارات العامة
- **F1**: عرض المساعدة والتوثيق الخاص بشاشة قيد اليومية
- **F2**: البحث في القيود
- **F3**: تحديث البيانات (Refresh)
- **F4**: طباعة القيد الحالي
- **F5**: فتح قيد جديد
- **F8**: حفظ القيد
- **F9**: اعتماد القيد
- **F10**: ترحيل القيد
- **F11**: عكس القيد
- **F12**: إغلاق الشاشة

#### اختصارات تفاصيل القيد
- **Ctrl+N**: إضافة سطر جديد
- **Ctrl+D**: حذف السطر الحالي
- **Ctrl+I**: فتح قائمة الحسابات للاختيار
- **Ctrl+C**: فتح قائمة مراكز التكلفة
- **Ctrl+P**: فتح قائمة المشاريع
- **Ctrl+Up/Down**: التنقل بين أسطر القيد
- **Alt+M**: إدخال المبلغ في خانة المدين
- **Alt+C**: إدخال المبلغ في خانة الدائن

#### أزرار الوظائف السريعة في شريط الأدوات
- **زر توزيع التكاليف**: توزيع مبلغ على عدة مراكز تكلفة
- **زر القيود المتكررة**: إدارة القيود الدورية المتكررة
- **زر عرض الرصيد**: عرض رصيد الحساب المحدد
- **زر المرفقات**: إضافة أو عرض المستندات المرفقة بالقيد
- **زر التحقق**: التحقق من توازن القيد وصحة البيانات
- **زر التوزيع المتساوي**: توزيع المبلغ بالتساوي على عدة حسابات
- **زر النسخة المطبوعة**: معاينة النسخة المطبوعة للقيد
- **زر السجل**: عرض سجل التغييرات على القيد

#### نقاط الوصول السريع
- **شريط حالة رموز سريعة**: رموز ملونة توضح حالة القيد (مسودة، معتمد، مرحل)
- **مؤشرات توازن القيد**: مؤشر مرئي يوضح ما إذا كان القيد متوازناً أم لا
- **مؤشرات العملات**: رموز العملات المستخدمة في القيد
- **أيقونة الإشعارات**: إظهار إشعارات خاصة بحالة القيد أو العمليات السابقة
