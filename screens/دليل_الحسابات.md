# شاشة دليل الحسابات (Chart of Accounts)

## نظرة عامة
شاشة دليل الحسابات هي واحدة من أهم الشاشات الأساسية في نظام الأونكس برو ERP، وتمثل العمود الفقري للنظام المحاسبي بأكمله. تستخدم هذه الشاشة لإنشاء وإدارة هيكل الحسابات المالية للمؤسسة وفقاً للمعايير المحاسبية المتبعة. يتيح دليل الحسابات تنظيم العمليات المالية بشكل منهجي، وتصنيف الحسابات حسب طبيعتها ووظيفتها، وإعداد التقارير المالية المختلفة.

تتميز شاشة دليل الحسابات في نظام الأونكس برو بالمرونة العالية التي تسمح بتكييف هيكل الحسابات ليناسب مختلف أنواع المؤسسات والقطاعات، سواء كانت تجارية، صناعية، خدمية، أو غير ربحية. كما تدعم الشاشة مستويات متعددة من الحسابات (الحسابات الرئيسية، الحسابات الفرعية، الحسابات التفصيلية)، وتوفر إمكانية ربط الحسابات بمراكز التكلفة والمشاريع والأنشطة لتحليل الأداء المالي بشكل دقيق.

تعتبر شاشة دليل الحسابات أساساً للعديد من العمليات الرئيسية في النظام، مثل إدخال القيود المحاسبية، وإعداد التقارير المالية، وإقفال الفترات المحاسبية، وإدارة الموازنات، مما يجعلها محوراً أساسياً في دورة العمل المحاسبي.

## مكونات واجهة المستخدم

### القسم العلوي (شريط الأدوات)
- **شريط العنوان**: يعرض عنوان الشاشة "دليل الحسابات" مع أيقونة توضيحية
- **شريط الأدوات الرئيسي**: يحتوي على أزرار للوظائف الأساسية مثل:
  - زر إضافة حساب جديد (أيقونة +)
  - زر تعديل الحساب المحدد (أيقونة قلم)
  - زر حذف الحساب (أيقونة سلة مهملات)
  - زر تحديث البيانات (أيقونة تحديث)
  - زر استيراد الحسابات (أيقونة استيراد)
  - زر تصدير الحسابات (أيقونة تصدير)
  - زر طباعة دليل الحسابات (أيقونة طابعة)
  - زر الحسابات المفضلة (أيقونة نجمة)
  - زر المساعدة (أيقونة علامة استفهام)
- **شريط البحث**: يتيح البحث السريع عن حساب محدد حسب الكود أو الاسم
- **عوامل التصفية**: خيارات لتصفية قائمة الحسابات (الكل، النشطة، المعطلة، الرئيسية، الفرعية)
- **مؤشر الحالة**: رموز ملونة توضح حالة الحسابات (نشط، معطل، مغلق، إلخ)

### القسم الأيسر (شجرة الحسابات)
- **هيكل شجرة الحسابات**: عرض هرمي للحسابات في شكل شجرة قابلة للتوسيع والطي
- **رموز تمييز نوع الحساب**: أيقونات مختلفة تميز أنواع الحسابات المختلفة
  - حسابات الأصول (أيقونة مبنى)
  - حسابات الخصوم (أيقونة سلسلة)
  - حسابات الإيرادات (أيقونة سهم للأعلى)
  - حسابات المصروفات (أيقونة سهم للأسفل)
  - حسابات حقوق الملكية (أيقونة شخص)
- **تصنيف الحسابات بالألوان**: ألوان مختلفة لتمييز تصنيفات الحسابات
  - الحسابات النشطة (أخضر)
  - الحسابات المعطلة (رمادي)
  - الحسابات المغلقة (أحمر)
  - الحسابات المفضلة (أصفر ذهبي)
- **أزرار التحكم في العرض**:
  - زر توسيع الكل
  - زر طي الكل
  - زر تحديث الشجرة
  - زر تغيير طريقة العرض (شجرة، قائمة)

### القسم الأيمن (تفاصيل الحساب)
تنقسم منطقة تفاصيل الحساب إلى عدة تبويبات:

#### تبويب المعلومات الأساسية
- **كود الحساب**: الرمز الفريد للحساب المالي
- **اسم الحساب بالعربية**: الاسم الكامل للحساب باللغة العربية
- **اسم الحساب بالإنجليزية**: الاسم الكامل للحساب باللغة الإنجليزية
- **مستوى الحساب**: مستوى الحساب في التسلسل الهرمي (1، 2، 3، ...)
- **كود الحساب الأب**: رمز الحساب الأعلى الذي يتبع له هذا الحساب
- **نوع الحساب**: تصنيف الحساب (أصول، خصوم، إيرادات، مصروفات، حقوق ملكية)
- **فئة الحساب**: تصنيف فرعي للحساب (متداول، ثابت، مستحق، إلخ)
- **مجموعة الحساب**: المجموعة التي ينتمي إليها الحساب
- **تصنيف الحساب**: التصنيف المالي للحساب
- **طبيعة الحساب**: طبيعة رصيد الحساب (مدين، دائن)
- **حالة الحساب**: حالة الحساب (نشط، معطل، مغلق)
- **علامة الحساب المفضل**: خانة اختيار لتحديد الحساب كمفضل
- **ملاحظات**: حقل لإضافة ملاحظات إضافية حول الحساب
- **معلومات الإنشاء**: تاريخ إنشاء الحساب والمستخدم الذي أنشأه
- **معلومات آخر تعديل**: تاريخ آخر تعديل للحساب والمستخدم الذي قام به

#### تبويب خصائص الحساب
- **استخدام مركز التكلفة**: تحديد ما إذا كان الحساب يستخدم مراكز التكلفة
- **استخدام المشروع**: تحديد ما إذا كان الحساب يستخدم المشاريع
- **تحليل الحساب**: تحديد مستوى تحليل الحساب
- **فترة الربط**: تحديد فترة ربط الحساب مع الحسابات الأخرى
- **نوع التدفق**: تحديد نوع التدفق النقدي للحساب
- **استخدام العملات**: تحديد ما إذا كان الحساب يتعامل بعملات متعددة
- **علم إغلاق الحساب**: تحديد ما إذا كان الحساب يتم إغلاقه في نهاية الفترة
- **علم الحساب التفصيلي**: تحديد ما إذا كان الحساب يقبل تفاصيل إضافية
- **نوع تفاصيل الحساب**: نوع التفاصيل المرتبطة بالحساب (عملاء، موردين، موظفين، إلخ)
- **علم التأثر بالمعاملات**: تحديد ما إذا كان الحساب يتأثر بالمعاملات المالية
- **حساب مدين/دائن**: تحديد الطبيعة الافتراضية للحساب
- **علم المصروف/الإيراد المقدم**: تحديد ما إذا كان الحساب يعالج كمصروف/إيراد مقدم
- **استخدام نشط**: تحديد ما إذا كان الحساب يستخدم في النظام حالياً

#### تبويب الحسابات المرتبطة
- **حساب فروق العملة**: الحساب المستخدم لفروق تحويل العملات
- **حسابات التسوية**: الحسابات المستخدمة لتسوية هذا الحساب
- **حسابات الإقفال**: الحسابات المستخدمة لإقفال هذا الحساب
- **حسابات الترحيل**: الحسابات المستخدمة لترحيل أرصدة هذا الحساب
- **جدول الحسابات المرتبطة**: عرض جميع الحسابات المرتبطة بهذا الحساب:
  - كود الحساب المرتبط
  - اسم الحساب المرتبط
  - نوع العلاقة
  - تاريخ بدء العلاقة
  - تاريخ انتهاء العلاقة
  - ملاحظات

#### تبويب مراكز التكلفة
- **جدول مراكز التكلفة المرتبطة**:
  - كود مركز التكلفة
  - اسم مركز التكلفة
  - نوع الارتباط (أساسي، فرعي)
  - حالة الارتباط (نشط، معطل)
- **شريط أدوات**:
  - زر إضافة مركز تكلفة
  - زر حذف ارتباط مركز تكلفة
  - زر تحديث قائمة مراكز التكلفة
- **إعدادات العلاقة**:
  - خيار السماح بكل مراكز التكلفة
  - خيار تقييد مراكز التكلفة المحددة
  - خيار جعل مركز التكلفة إلزامي

#### تبويب المشاريع والأنشطة
- **جدول المشاريع المرتبطة**:
  - رمز المشروع
  - اسم المشروع
  - نوع الارتباط
  - حالة الارتباط
- **جدول الأنشطة المرتبطة**:
  - رمز النشاط
  - اسم النشاط
  - نوع الارتباط
  - حالة الارتباط
- **شريط أدوات**:
  - زر إضافة مشروع/نشاط
  - زر حذف ارتباط
  - زر تحديث القائمة
- **إعدادات العلاقة**:
  - خيار السماح بكل المشاريع/الأنشطة
  - خيار تقييد المشاريع/الأنشطة المحددة
  - خيار جعل المشروع/النشاط إلزامي

#### تبويب العملات
- **جدول العملات المرتبطة**:
  - رمز العملة
  - اسم العملة
  - سعر الصرف الحالي
  - تاريخ آخر تحديث للسعر
  - العملة الافتراضية (نعم/لا)
- **شريط أدوات**:
  - زر إضافة عملة
  - زر حذف ارتباط عملة
  - زر تحديث أسعار الصرف
- **إعدادات العملات**:
  - خيار استخدام العملة الأساسية فقط
  - خيار السماح بعملات متعددة
  - خيار تحديد عملة افتراضية للحساب

#### تبويب الأرصدة والحركات
- **جدول الأرصدة حسب الفترة**:
  - الفترة المحاسبية
  - الرصيد الافتتاحي
  - إجمالي المدين
  - إجمالي الدائن
  - الرصيد الختامي
  - العملة
- **جدول الأرصدة حسب الفروع**:
  - الفرع
  - الرصيد الافتتاحي
  - إجمالي المدين
  - إجمالي الدائن
  - الرصيد الختامي
- **جدول الأرصدة حسب مراكز التكلفة**:
  - مركز التكلفة
  - الرصيد الافتتاحي
  - إجمالي المدين
  - إجمالي الدائن
  - الرصيد الختامي
- **ملخص الحركات**:
  - إجمالي عدد الحركات
  - إجمالي المبالغ المدينة
  - إجمالي المبالغ الدائنة
  - صافي الحركة
  - تاريخ آخر حركة

#### تبويب الموازنة التقديرية
- **جدول الموازنة حسب الفترة**:
  - الفترة المحاسبية
  - المبلغ المقدر
  - المبلغ الفعلي
  - الفرق
  - نسبة التنفيذ
- **جدول الموازنة حسب مراكز التكلفة**:
  - مركز التكلفة
  - المبلغ المقدر
  - المبلغ الفعلي
  - الفرق
  - نسبة التنفيذ
- **شريط أدوات**:
  - زر إضافة بند موازنة
  - زر تعديل بند موازنة
  - زر حذف بند موازنة
  - زر تحديث الموازنة

#### تبويب الصلاحيات
- **جدول مجموعات المستخدمين**:
  - اسم المجموعة
  - صلاحية الوصول (قراءة، تعديل، حذف)
  - صلاحية إدخال القيود
  - صلاحية إقفال الحساب
  - صلاحية ترحيل الحساب
- **جدول المستخدمين**:
  - اسم المستخدم
  - صلاحية الوصول (قراءة، تعديل، حذف)
  - صلاحية إدخال القيود
  - صلاحية إقفال الحساب
  - صلاحية ترحيل الحساب
- **شريط أدوات**:
  - زر إضافة صلاحية
  - زر تعديل صلاحية
  - زر حذف صلاحية
  - زر نسخ صلاحيات

### شريط الحالة (أسفل الشاشة)
- **إجمالي عدد الحسابات**: عرض إجمالي عدد الحسابات في النظام
- **عدد الحسابات النشطة**: عدد الحسابات النشطة حالياً
- **عدد الحسابات المعطلة**: عدد الحسابات المعطلة
- **إجمالي الأرصدة المدينة**: مجموع أرصدة الحسابات المدينة
- **إجمالي الأرصدة الدائنة**: مجموع أرصدة الحسابات الدائنة
- **تاريخ آخر تحديث**: تاريخ ووقت آخر تحديث لدليل الحسابات
- **اسم المستخدم الحالي**: اسم المستخدم الذي يستخدم الشاشة حالياً

## الوظائف الرئيسية

### إدارة الحسابات
1. **إنشاء حساب جديد**:
   - إدخال كود الحساب واسمه بالعربية والإنجليزية
   - تحديد نوع الحساب وتصنيفه
   - تحديد الحساب الأب إذا كان حساباً فرعياً
   - تعيين خصائص الحساب (مراكز تكلفة، مشاريع، عملات، إلخ)
   - حفظ الحساب الجديد في دليل الحسابات
   - التحقق من عدم تكرار كود الحساب
   - التحقق من اتباع قواعد ترميز الحسابات

2. **تعديل حساب موجود**:
   - تحديث معلومات الحساب الأساسية
   - تغيير خصائص الحساب
   - تعديل ارتباطات الحساب (مراكز التكلفة، المشاريع، إلخ)
   - حفظ التغييرات مع توثيق معلومات التعديل
   - التحقق من صلاحية المستخدم للتعديل
   - التأكد من عدم وجود قيود محاسبية تمنع التعديل

3. **حذف حساب**:
   - التحقق من إمكانية حذف الحساب (عدم وجود حركات أو أرصدة)
   - التحقق من عدم ارتباط الحساب بحسابات فرعية
   - إزالة جميع ارتباطات الحساب (مراكز تكلفة، مشاريع، عملات)
   - حذف الحساب من دليل الحسابات
   - توثيق عملية الحذف في سجل النظام

4. **تعطيل/تفعيل حساب**:
   - تغيير حالة الحساب بين نشط ومعطل
   - تسجيل سبب التعطيل وتاريخه
   - منع استخدام الحساب المعطل في القيود الجديدة
   - السماح بإعادة تفعيل الحساب عند الحاجة
   - الحفاظ على أرصدة وتاريخ الحساب المعطل

5. **ترقية/تخفيض مستوى الحساب**:
   - تغيير مستوى الحساب في الهيكل الهرمي
   - نقل الحساب بين المستويات المختلفة
   - إعادة ترتيب الحسابات التابعة عند الترقية/التخفيض
   - تحديث العلاقات مع الحسابات الأخرى

6. **نسخ هيكل الحسابات**:
   - نسخ هيكل حسابات كامل أو جزئي
   - إنشاء نسخة من الحسابات مع تعديل الأكواد
   - نسخ الخصائص والارتباطات مع الحسابات
   - خيارات لنسخ الأرصدة أو الحركات

7. **استيراد/تصدير الحسابات**:
   - استيراد الحسابات من ملفات خارجية (Excel، CSV، XML)
   - تصدير دليل الحسابات إلى ملفات مختلفة
   - تحديد قالب الاستيراد/التصدير
   - التحقق من صحة بيانات الاستيراد
   - معالجة حالات التكرار والتعارض

### إدارة العلاقات والارتباطات
1. **ربط الحسابات بمراكز التكلفة**:
   - إضافة/إزالة ارتباطات مراكز التكلفة للحساب
   - تحديد نوع الارتباط (إلزامي، اختياري)
   - تقييد استخدام مراكز تكلفة محددة
   - تعيين مراكز تكلفة افتراضية للحساب
   - تحديد صلاحيات استخدام مراكز التكلفة

2. **ربط الحسابات بالمشاريع والأنشطة**:
   - إضافة/إزالة ارتباطات المشاريع للحساب
   - تحديد المشاريع المسموح استخدامها مع الحساب
   - ربط الحساب بأنشطة محددة ضمن المشاريع
   - تعيين مشاريع وأنشطة افتراضية للحساب
   - تحديد صلاحيات استخدام المشاريع والأنشطة

3. **إدارة العملات المتعددة**:
   - تحديد العملات المسموح استخدامها مع الحساب
   - تعيين عملة افتراضية للحساب
   - تحديث أسعار الصرف المرتبطة بالحساب
   - إدارة حسابات فروق العملة
   - عرض أرصدة الحساب بعملات مختلفة

4. **إدارة المستويات الهرمية**:
   - إنشاء وإدارة مستويات متعددة من الحسابات
   - تحديد العلاقات بين الحسابات الرئيسية والفرعية
   - تجميع الحسابات في مجموعات منطقية
   - توحيد خصائص مجموعات الحسابات
   - تطبيق سياسات محددة على مستويات معينة

5. **ربط الحسابات بالحسابات التفصيلية**:
   - ربط الحسابات بتفاصيل مثل العملاء والموردين والموظفين
   - تحديد نوع التفاصيل المرتبطة بالحساب
   - إدارة العلاقة بين الحساب الرئيسي وتفاصيله
   - عرض حركات الحسابات التفصيلية
   - تجميع أرصدة الحسابات التفصيلية

6. **إدارة العلاقات مع الوحدات الأخرى**:
   - ربط الحسابات بوحدات النظام الأخرى (المخزون، المبيعات، المشتريات)
   - تحديد الحسابات المستخدمة في العمليات التلقائية
   - تكوين حسابات الترحيل التلقائي
   - إعداد العلاقات مع الأصول الثابتة
   - ربط الحسابات بالموازنات التقديرية

### عرض وتحليل البيانات
1. **عرض هيكل الحسابات**:
   - عرض الحسابات في هيكل شجري متعدد المستويات
   - فلترة الحسابات حسب معايير مختلفة
   - البحث السريع عن حسابات محددة
   - تغيير طريقة عرض الهيكل (شجرة، قائمة، جدول)
   - تصدير هيكل الحسابات بتنسيقات مختلفة

2. **عرض أرصدة الحسابات**:
   - عرض أرصدة الحسابات للفترة الحالية والسابقة
   - عرض الأرصدة حسب الفروع ومراكز التكلفة
   - مقارنة الأرصدة الفعلية مع الموازنة التقديرية
   - عرض تطور الرصيد عبر الفترات المختلفة
   - تحليل مكونات الرصيد (افتتاحي، حركات، ختامي)

3. **تحليل حركات الحسابات**:
   - عرض تفاصيل حركات الحساب المحدد
   - تصفية الحركات حسب الفترة أو النوع أو المبلغ
   - تحليل اتجاهات الحركات عبر الزمن
   - عرض القيود المرتبطة بكل حركة
   - تصدير تقارير الحركات بتنسيقات مختلفة

4. **مراقبة الموازنة التقديرية**:
   - عرض الموازنة التقديرية مقابل الأرصدة الفعلية
   - تحليل انحرافات الموازنة
   - متابعة نسب تنفيذ الموازنة
   - عرض توزيع الموازنة على الفترات المختلفة
   - تحليل الموازنة حسب مراكز التكلفة والمشاريع

5. **التقارير المالية**:
   - إعداد تقارير مالية مختلفة من دليل الحسابات
   - عرض ميزان المراجعة للحسابات
   - إعداد تقارير القوائم المالية (الميزانية، الدخل)
   - تقارير تحليلية للحسابات وأرصدتها
   - تصدير التقارير بتنسيقات مختلفة

6. **لوحات المعلومات والإحصائيات**:
   - عرض إحصائيات ومؤشرات أداء رئيسية للحسابات
   - لوحات معلومات تفاعلية لمراقبة أداء الحسابات
   - تحليل بياني لتوزيع الإيرادات والمصروفات
   - مؤشرات النمو والتغير في الأرصدة
   - إحصائيات استخدام وحركة الحسابات

### إدارة العمليات المحاسبية
1. **الأرصدة الافتتاحية**:
   - إدخال الأرصدة الافتتاحية للحسابات
   - التحقق من توازن الأرصدة الافتتاحية
   - ترحيل الأرصدة من فترة سابقة
   - تحديث وتعديل الأرصدة الافتتاحية
   - توزيع الأرصدة على الفروع ومراكز التكلفة

2. **الإقفال وإعادة الفتح**:
   - إقفال الحسابات في نهاية الفترة المحاسبية
   - إقفال حسابات الدخل في نهاية السنة المالية
   - ترحيل أرصدة حسابات الدخل إلى الأرباح المحتجزة
   - إعادة فتح حسابات للتعديل (بصلاحيات خاصة)
   - التأكد من توازن الحسابات قبل الإقفال

3. **التدقيق والتحقق**:
   - التحقق من توازن الحسابات المدينة والدائنة
   - مراجعة صحة تصنيف الحسابات
   - فحص اكتمال هيكل الحسابات
   - التحقق من صحة الأرصدة والحركات
   - تدقيق العلاقات بين الحسابات

4. **تسوية الحسابات**:
   - إجراء تسويات نهاية الفترة للحسابات
   - تسوية الحسابات مع الأنظمة الفرعية
   - تسوية حسابات العملات الأجنبية
   - تسوية حسابات التسويات المؤقتة
   - إنشاء قيود التسوية التلقائية

5. **إعادة تقييم الحسابات**:
   - إعادة تقييم حسابات العملات الأجنبية
   - تسجيل أرباح وخسائر إعادة التقييم
   - تطبيق سياسات إعادة التقييم المختلفة
   - عرض تأثير إعادة التقييم على الأرصدة
   - متابعة تاريخ إعادة التقييم

6. **ترحيل الأرصدة**:
   - ترحيل أرصدة الحسابات بين الفترات المحاسبية
   - ترحيل الأرصدة بين السنوات المالية
   - تحديد الحسابات المشمولة بالترحيل
   - التأكد من صحة عمليات الترحيل
   - متابعة تاريخ ووقت الترحيل

### إدارة الصلاحيات والأمان
1. **إدارة صلاحيات المستخدمين**:
   - تحديد صلاحيات الوصول لدليل الحسابات
   - تحديد صلاحيات إنشاء/تعديل/حذف الحسابات
   - تقييد الوصول لحسابات محددة
   - إدارة صلاحيات عرض الأرصدة والحركات
   - تحديد صلاحيات تشغيل التقارير

2. **مستويات الصلاحيات**:
   - تحديد صلاحيات على مستوى الحساب
   - تحديد صلاحيات على مستوى مجموعة الحسابات
   - تحديد صلاحيات على مستوى نوع الحساب
   - صلاحيات الإقفال وإعادة الفتح
   - صلاحيات الترحيل وإعادة التقييم

3. **سجل العمليات والتغييرات**:
   - تسجيل جميع التغييرات على دليل الحسابات
   - تسجيل عمليات إنشاء وتعديل وحذف الحسابات
   - توثيق المستخدمين الذين قاموا بالتغييرات
   - الاحتفاظ بتاريخ وتوقيت كل تغيير
   - إمكانية استعادة النسخ السابقة من التغييرات

4. **حماية البيانات**:
   - تأمين أرصدة وحركات الحسابات
   - منع التعديل على الفترات المقفلة
   - حماية هيكل الحسابات من التغييرات غير المصرح بها
   - تشفير البيانات الحساسة
   - النسخ الاحتياطي الدوري لدليل الحسابات

5. **تدقيق الصلاحيات**:
   - مراجعة وتدقيق استخدام الصلاحيات
   - تقارير استخدام الصلاحيات
   - تتبع الوصول إلى دليل الحسابات
   - تحليل أنماط استخدام الصلاحيات
   - تحديد محاولات الوصول غير المصرح به

6. **فصل المهام**:
   - تطبيق مبدأ فصل المهام في إدارة الحسابات
   - فصل صلاحيات إنشاء الحسابات عن إقفالها
   - فصل صلاحيات إدخال القيود عن ترحيلها
   - فصل صلاحيات مراجعة الحسابات عن تعديلها
   - تقارير فحص تعارض الصلاحيات 